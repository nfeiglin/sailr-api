function MediumEditor(e,t){"use strict";return this.init(e,t)}!function(){function e(e){if(!e.__listeners){e.upload||(e.upload={}),e.__listeners=[];var t=e.upload.addEventListener;e.upload.addEventListener=function(i,n){e.__listeners[i]=n,t&&t.apply(this,arguments)}}}var t=function(){try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(e)return!0}catch(t){if(void 0!=navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1},i=function(e,t){window.XMLHttpRequest.prototype[e]=t(window.XMLHttpRequest.prototype[e])};if(window.XMLHttpRequest&&(!window.FormData||window.FileAPI&&FileAPI.forceLoad?(i("open",function(t){return function(i,n,o){e(this),this.__url=n,t.apply(this,[i,n,o])}}),i("getResponseHeader",function(e){return function(t){return this.__fileApiXHR?this.__fileApiXHR.getResponseHeader(t):e.apply(this,[t])}}),i("getAllResponseHeaders",function(e){return function(){return this.__fileApiXHR?this.__fileApiXHR.abort():null==e?null:e.apply(this)}}),i("abort",function(e){return function(){return this.__fileApiXHR?this.__fileApiXHR.abort():null==e?null:e.apply(this)}}),i("setRequestHeader",function(t){return function(i,n){if("__setXHR_"===i){e(this);var o=n(this);o instanceof Function&&o(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[i]=n,t.apply(this,arguments)}}),i("send",function(e){return function(){var i=this;if(arguments[0]&&arguments[0].__isShim){var n=arguments[0],o={url:i.__url,complete:function(e,t){!e&&i.__listeners.load&&i.__listeners.load({type:"load",loaded:i.__loaded,total:i.__total,target:i,lengthComputable:!0}),!e&&i.__listeners.loadend&&i.__listeners.loadend({type:"loadend",loaded:i.__loaded,total:i.__total,target:i,lengthComputable:!0}),"abort"===e&&i.__listeners.abort&&i.__listeners.abort({type:"abort",loaded:i.__loaded,total:i.__total,target:i,lengthComputable:!0}),void 0!==t.status&&Object.defineProperty(i,"status",{get:function(){return t.status}}),void 0!==t.statusText&&Object.defineProperty(i,"statusText",{get:function(){return t.statusText}}),Object.defineProperty(i,"readyState",{get:function(){return 4}}),void 0!==t.response&&Object.defineProperty(i,"response",{get:function(){return t.response}}),Object.defineProperty(i,"responseText",{get:function(){return t.responseText}}),i.__fileApiXHR=t,i.onreadystatechange()},fileprogress:function(e){e.target=i,i.__listeners.progress&&i.__listeners.progress(e),i.__total=e.total,i.__loaded=e.loaded},headers:i.__requestHeaders};o.data={},o.files={};for(var r=0;r<n.data.length;r++){var s=n.data[r];null!=s.val&&null!=s.val.name&&null!=s.val.size&&null!=s.val.type?o.files[s.key]=s.val:o.data[s.key]=s.val}setTimeout(function(){if(!t())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';i.__fileApiXHR=FileAPI.upload(o)},1)}else e.apply(i,arguments)}})):i("setRequestHeader",function(e){return function(t,i){if("__setXHR_"===t){var n=i(this);n instanceof Function&&n(this)}else e.apply(this,arguments)}}),window.XMLHttpRequest.__isShim=!0),!window.FormData||window.FileAPI&&FileAPI.forceLoad){var n=function(e){if(!t())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';if(!e.__isWrapped&&(null!=e.getAttribute("ng-file-select")||null!=e.getAttribute("data-ng-file-select"))){var i=document.createElement("div");i.innerHTML='<div class="js-fileapi-wrapper" style="position:relative; overflow:hidden"></div>',i=i.firstChild;var n=e.parentNode;n.insertBefore(i,e),n.removeChild(e),i.appendChild(e),e.__isWrapped=!0}},o=function(e){return function(t){for(var i=FileAPI.getFiles(t),n=0;n<i.length;n++)void 0===i[n].size&&(i[n].size=0),void 0===i[n].name&&(i[n].name="file"),void 0===i[n].type&&(i[n].type="undefined");t.target||(t.target={}),t.target.files=i,t.target.files.item=function(e){return t.target.files[e]||null},e(t)}},r=function(e,t){return("change"===t.toLowerCase()||"onchange"===t.toLowerCase())&&"file"==e.getAttribute("type")};HTMLInputElement.prototype.addEventListener&&(HTMLInputElement.prototype.addEventListener=function(e){return function(t,i,s,a){r(this,t)?(n(this),e.apply(this,[t,o(i),s,a])):e.apply(this,[t,i,s,a])}}(HTMLInputElement.prototype.addEventListener)),HTMLInputElement.prototype.attachEvent&&(HTMLInputElement.prototype.attachEvent=function(e){return function(t,i){r(this,t)?(n(this),e.apply(this,[t,o(i)])):e.apply(this,[t,i])}}(HTMLInputElement.prototype.attachEvent)),window.FormData=FormData=function(){return{append:function(e,t,i){this.data.push({key:e,val:t,name:i})},data:[],__isShim:!0}},function(){if(window.FileAPI||(window.FileAPI={}),!FileAPI.upload){var e,i,n,o,r,s=document.createElement("script"),a=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)e=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)i=window.FileAPI.jsPath;else for(n=0;n<a.length;n++)if(r=a[n].src,o=r.indexOf("angular-file-upload-shim.js"),-1==o&&(o=r.indexOf("angular-file-upload-shim.min.js")),o>-1){i=r.substring(0,o);break}null==FileAPI.staticPath&&(FileAPI.staticPath=i),s.setAttribute("src",e||i+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(s),FileAPI.hasFlash=t()}}()}window.FileReader||(window.FileReader=function(){function e(e,i){var n={type:e,target:t,loaded:i.loaded,total:i.total,error:i.error};return null!=i.result&&(n.target.result=i.result),n}var t=this,i=!1;this.listeners={},this.addEventListener=function(e,i){t.listeners[e]=t.listeners[e]||[],t.listeners[e].push(i)},this.removeEventListener=function(e,i){t.listeners[e]&&t.listeners[e].splice(t.listeners[e].indexOf(i),1)},this.dispatchEvent=function(e){var i=t.listeners[e.type];if(i)for(var n=0;n<i.length;n++)i[n].call(t,e)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var n=function(n){if(i||(i=!0,t.onloadstart&&this.onloadstart(e("loadstart",n))),"load"===n.type){t.onloadend&&t.onloadend(e("loadend",n));var o=e("load",n);t.onload&&t.onload(o),t.dispatchEvent(o)}else if("progress"===n.type){var o=e("progress",n);t.onprogress&&t.onprogress(o),t.dispatchEvent(o)}else{var o=e("error",n);t.onerror&&t.onerror(o),t.dispatchEvent(o)}};this.readAsArrayBuffer=function(e){FileAPI.readAsBinaryString(e,n)},this.readAsBinaryString=function(e){FileAPI.readAsBinaryString(e,n)},this.readAsDataURL=function(e){FileAPI.readAsDataURL(e,n)},this.readAsText=function(e){FileAPI.readAsText(e,n)}})}(),function(){var e=angular.module("angularFileUpload",[]);e.service("$upload",["$http","$q","$timeout",function(e,t,i){function n(n){n.method=n.method||"POST",n.headers=n.headers||{},n.transformRequest=n.transformRequest||function(t,i){return window.ArrayBuffer&&t instanceof window.ArrayBuffer?t:e.defaults.transformRequest[0](t,i)};var o=t.defer();window.XMLHttpRequest.__isShim&&(n.headers.__setXHR_=function(){return function(e){e&&(n.__XHR=e,n.xhrFn&&n.xhrFn(e),e.upload.addEventListener("progress",function(e){o.notify(e)},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&o.notify(e)},!1))}}),e(n).then(function(e){o.resolve(e)},function(e){o.reject(e)},function(e){o.notify(e)});var r=o.promise;return r.success=function(e){return r.then(function(t){e(t.data,t.status,t.headers,n)}),r},r.error=function(e){return r.then(null,function(t){e(t.data,t.status,t.headers,n)}),r},r.progress=function(e){return r.then(null,null,function(t){e(t)}),r},r.abort=function(){return n.__XHR&&i(function(){n.__XHR.abort()}),r},r.xhr=function(e){return n.xhrFn=function(t){return function(){t&&t.apply(r,arguments),e.apply(r,arguments)}}(n.xhrFn),r},r}this.upload=function(t){t.headers=t.headers||{},t.headers["Content-Type"]=void 0,t.transformRequest=t.transformRequest||e.defaults.transformRequest;var i=new FormData,o=t.transformRequest,r=t.data;return t.transformRequest=function(e,i){if(r)if(t.formDataAppender)for(var n in r){var s=r[n];t.formDataAppender(e,n,s)}else for(var n in r){var s=r[n];if("function"==typeof o)s=o(s,i);else for(var a=0;a<o.length;a++){var l=o[a];"function"==typeof l&&(s=l(s,i))}e.append(n,s)}if(null!=t.file){var c=t.fileFormDataName||"file";if("[object Array]"===Object.prototype.toString.call(t.file))for(var d="[object String]"===Object.prototype.toString.call(c),a=0;a<t.file.length;a++)e.append(d?c:c[a],t.file[a],t.fileName&&t.fileName[a]||t.file[a].name);else e.append(c,t.file,t.fileName||t.file.name)}return e},t.data=i,n(t)},this.http=function(e){return n(e)}}]),e.directive("ngFileSelect",["$parse","$timeout",function(e,t){return function(i,n,o){var r=e(o.ngFileSelect);n.bind("change",function(e){var n,o,s=[];if(n=e.target.files,null!=n)for(o=0;o<n.length;o++)s.push(n.item(o));t(function(){r(i,{$files:s,$event:e})})}),("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&n.bind("touchend",function(e){e.preventDefault(),e.target.click()})}}]),e.directive("ngFileDropAvailable",["$parse","$timeout",function(e,t){return function(i,n,o){if("draggable"in document.createElement("span")){var r=e(o.ngFileDropAvailable);t(function(){r(i)})}}}]),e.directive("ngFileDrop",["$parse","$timeout","$location",function(e,t,i){return function(n,o,r){function s(e){return/^[\000-\177]*$/.test(e)}function a(e,n){var o=[],r=e.dataTransfer.items;if(r&&r.length>0&&r[0].webkitGetAsEntry&&"file"!=i.protocol())for(var a=0;a<r.length;a++){var c=r[a].webkitGetAsEntry();null!=c&&(s(c.name)?l(o,c):o.push(r[a].getAsFile()))}else{var d=e.dataTransfer.files;if(null!=d)for(var a=0;a<d.length;a++)o.push(d.item(a))}!function p(e){t(function(){u?p(10):n(o)},e||0)}()}function l(e,t){if(null!=t)if(t.isDirectory){var i=t.createReader();u++,i.readEntries(function(t){for(var i=0;i<t.length;i++)l(e,t[i]);u--})}else u++,t.file(function(t){u--,e.push(t)})}if("draggable"in document.createElement("span")){var c=null;o[0].addEventListener("dragover",function(i){if(i.stopPropagation(),i.preventDefault(),o.addClass(o[0].__drag_over_class_),t.cancel(c),!o[0].__drag_entered_){o[0].__drag_entered_=!0;var s=e(r.ngFileDragOverClass);if(s instanceof Function){var a=s(n,{$event:i});o[0].__drag_over_class_=a,o.addClass(o[0].__drag_over_class_)}else o[0].__drag_over_class_=r.ngFileDragOverClass||"dragover",o.addClass(o[0].__drag_over_class_)}},!1),o[0].addEventListener("dragenter",function(e){e.stopPropagation(),e.preventDefault()},!1),o[0].addEventListener("dragleave",function(){c=t(function(){o[0].__drag_entered_=!1,o.removeClass(o[0].__drag_over_class_)})},!1);var d=e(r.ngFileDrop);o[0].addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),o[0].__drag_entered_=!1,o.removeClass(o[0].__drag_over_class_),a(e,function(t){d(n,{$files:t,$event:e})})},!1);var u=0}}}])}();var sailrUrls={hashtagBase:"http://sailr.co/s/%23",cashtagBase:"http://sailr.co/s/%24",usernameBase:"http://sailr.co/"},sailrClasses={cashtagClass:"sailr cashtag-link",hashtagClass:"sailr hashtag-link",usernameClass:"sailr username-link"};!function(){function e(e,t){return t=t||"","string"!=typeof e&&(e.global&&t.indexOf("g")<0&&(t+="g"),e.ignoreCase&&t.indexOf("i")<0&&(t+="i"),e.multiline&&t.indexOf("m")<0&&(t+="m"),e=e.source),new RegExp(e.replace(/#\{(\w+)\}/g,function(e,t){var i=r.txt.regexen[t]||"";return"string"!=typeof i&&(i=i.source),i}),t)}function t(e,t){return e.replace(/#\{(\w+)\}/g,function(e,i){return t[i]||""})}function i(e,t,i){var n=String.fromCharCode(t);return i!==t&&(n+="-"+String.fromCharCode(i)),e.push(n),e}function n(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function o(e,t,i){return i?!e||e.match(t)&&RegExp["$&"]===e:"string"==typeof e&&e.match(t)&&RegExp["$&"]===e}if("undefined"==typeof r||null===r)var r={};r.txt={},r.txt.regexen={};var s={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};r.txt.htmlEscape=function(e){return e&&e.replace(/[&"'><]/g,function(e){return s[e]})},r.txt.regexSupplant=e,r.txt.stringSupplant=t,r.txt.addCharsToCharClass=i;var a=String.fromCharCode,l=[a(32),a(133),a(160),a(5760),a(6158),a(8232),a(8233),a(8239),a(8287),a(12288)];i(l,9,13),i(l,8192,8202);var c=[a(65534),a(65279),a(65535)];i(c,8234,8238),r.txt.regexen.spaces_group=e(l.join("")),r.txt.regexen.spaces=e("["+l.join("")+"]"),r.txt.regexen.invalid_chars_group=e(c.join("")),r.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/,r.txt.regexen.rtl_chars=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/gm,r.txt.regexen.non_bmp_code_pairs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/gm;var d=[];i(d,1024,1279),i(d,1280,1319),i(d,11744,11775),i(d,42560,42655),i(d,1425,1471),i(d,1473,1474),i(d,1476,1477),i(d,1479,1479),i(d,1488,1514),i(d,1520,1524),i(d,64274,64296),i(d,64298,64310),i(d,64312,64316),i(d,64318,64318),i(d,64320,64321),i(d,64323,64324),i(d,64326,64335),i(d,1552,1562),i(d,1568,1631),i(d,1646,1747),i(d,1749,1756),i(d,1758,1768),i(d,1770,1775),i(d,1786,1788),i(d,1791,1791),i(d,1872,1919),i(d,2208,2208),i(d,2210,2220),i(d,2276,2302),i(d,64336,64433),i(d,64467,64829),i(d,64848,64911),i(d,64914,64967),i(d,65008,65019),i(d,65136,65140),i(d,65142,65276),i(d,8204,8204),i(d,3585,3642),i(d,3648,3662),i(d,4352,4607),i(d,12592,12677),i(d,43360,43391),i(d,44032,55215),i(d,55216,55295),i(d,65441,65500),i(d,12449,12538),i(d,12540,12542),i(d,65382,65439),i(d,65392,65392),i(d,65296,65305),i(d,65313,65338),i(d,65345,65370),i(d,12353,12438),i(d,12441,12446),i(d,13312,19903),i(d,19968,40959),i(d,173824,177983),i(d,177984,178207),i(d,194560,195103),i(d,12291,12291),i(d,12293,12293),i(d,12347,12347),r.txt.regexen.nonLatinHashtagChars=e(d.join(""));var u=[];i(u,192,214),i(u,216,246),i(u,248,255),i(u,256,591),i(u,595,596),i(u,598,599),i(u,601,601),i(u,603,603),i(u,611,611),i(u,616,616),i(u,623,623),i(u,626,626),i(u,649,649),i(u,651,651),i(u,699,699),i(u,768,879),i(u,7680,7935),r.txt.regexen.latinAccentChars=e(u.join("")),r.txt.regexen.hashSigns=/[#＃]/,r.txt.regexen.hashtagAlpha=e(/[a-z_#{latinAccentChars}#{nonLatinHashtagChars}]/i),r.txt.regexen.hashtagAlphaNumeric=e(/[a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}]/i),r.txt.regexen.endHashtagMatch=e(/^(?:#{hashSigns}|:\/\/)/),r.txt.regexen.hashtagBoundary=e(/(?:^|$|[^&a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}])/),r.txt.regexen.validHashtag=e(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi),r.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@＠]|(?:rt|RT|rT|Rt):?)/,r.txt.regexen.atSigns=/[@＠]/,r.txt.regexen.validMentionOrList=e("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g"),r.txt.regexen.validReply=e(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/),r.txt.regexen.endMentionMatch=e(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/),r.txt.regexen.validUrlPrecedingChars=e(/(?:[^A-Za-z0-9@＠$#＃#{invalid_chars_group}]|^)/),r.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/,r.txt.regexen.invalidDomainChars=t("#{punct}#{spaces_group}#{invalid_chars_group}",r.txt.regexen),r.txt.regexen.validDomainChars=e(/[^#{invalidDomainChars}]/),r.txt.regexen.validSubdomain=e(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),r.txt.regexen.validDomainName=e(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),r.txt.regexen.validGTLD=e(RegExp("(?:(?:academy|actor|aero|agency|arpa|asia|bar|bargains|berlin|best|bid|bike|biz|blue|boutique|build|builders|buzz|cab|camera|camp|cards|careers|cat|catering|center|ceo|cheap|christmas|cleaning|clothing|club|codes|coffee|com|community|company|computer|construction|contractors|cool|coop|cruises|dance|dating|democrat|diamonds|directory|domains|edu|education|email|enterprises|equipment|estate|events|expert|exposed|farm|fish|flights|florist|foundation|futbol|gallery|gift|glass|gov|graphics|guitars|guru|holdings|holiday|house|immobilien|industries|info|institute|int|international|jobs|kaufen|kim|kitchen|kiwi|koeln|kred|land|lighting|limo|link|luxury|management|mango|marketing|menu|mil|mobi|moda|monash|museum|nagoya|name|net|neustar|ninja|okinawa|onl|org|partners|parts|photo|photography|photos|pics|pink|plumbing|post|pro|productions|properties|pub|qpon|recipes|red|rentals|repair|report|reviews|rich|ruhr|sexy|shiksha|shoes|singles|social|solar|solutions|supplies|supply|support|systems|tattoo|technology|tel|tienda|tips|today|tokyo|tools|training|travel|uno|vacations|ventures|viajes|villas|vision|vote|voting|voto|voyage|wang|watch|wed|wien|wiki|works|xxx|xyz|zone|дети|онлайн|орг|сайт|بازار|شبكة|みんな|中信|中文网|公司|公益|在线|我爱你|政务|游戏|移动|网络|集团|삼성)(?=[^0-9a-zA-Z@]|$))")),r.txt.regexen.validCCTLD=e(RegExp("(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bl|bm|bn|bo|bq|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|мон|рф|срб|укр|қаз|الاردن|الجزائر|السعودية|المغرب|امارات|ایران|بھارت|تونس|سودان|سورية|عمان|فلسطين|قطر|مصر|مليسيا|پاکستان|भारत|বাংলা|ভারত|ਭਾਰਤ|ભારત|இந்தியா|இலங்கை|சிங்கப்பூர்|భారత్|ලංකා|ไทย|გე|中国|中國|台湾|台灣|新加坡|香港|한국)(?=[^0-9a-zA-Z@]|$))")),r.txt.regexen.validPunycode=e(/(?:xn--[0-9a-z]+)/),r.txt.regexen.validDomain=e(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),r.txt.regexen.validAsciiDomain=e(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),r.txt.regexen.invalidShortDomain=e(/^#{validDomainName}#{validCCTLD}$/i),r.txt.regexen.validPortNumber=e(/[0-9]+/),r.txt.regexen.validGeneralUrlPathChars=e(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i),r.txt.regexen.validUrlBalancedParens=e("\\((?:#{validGeneralUrlPathChars}+|(?:#{validGeneralUrlPathChars}*\\(#{validGeneralUrlPathChars}+\\)#{validGeneralUrlPathChars}*))\\)","i"),r.txt.regexen.validUrlPathEndingChars=e(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),r.txt.regexen.validUrlPath=e("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),r.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,r.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,r.txt.regexen.extractUrl=e("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),r.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i,r.txt.regexen.urlHasProtocol=/^https?:\/\//i,r.txt.regexen.urlHasHttps=/^https:\/\//i,r.txt.regexen.cashtag=/[a-z]{1,6}(?:[._][a-z]{1,2})?/i,r.txt.regexen.validCashtag=e("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])","gi"),r.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i,r.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i,r.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i,r.txt.regexen.validateUrlPchar=e("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i"),r.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i,r.txt.regexen.validateUrlUserinfo=e("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*","i"),r.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i,r.txt.regexen.validateUrlIpv4=e(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i),r.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i,r.txt.regexen.validateUrlIp=e("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i"),r.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i,r.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i,r.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i,r.txt.regexen.validateUrlDomain=e(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i),r.txt.regexen.validateUrlHost=e("(?:#{validateUrlIp}|#{validateUrlDomain})","i"),r.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,r.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,r.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,r.txt.regexen.validateUrlUnicodeDomain=e(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i),r.txt.regexen.validateUrlUnicodeHost=e("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i"),r.txt.regexen.validateUrlPort=/[0-9]{1,5}/,r.txt.regexen.validateUrlUnicodeAuthority=e("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?","i"),r.txt.regexen.validateUrlAuthority=e("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i"),r.txt.regexen.validateUrlPath=e(/(\/#{validateUrlPchar}*)*/i),r.txt.regexen.validateUrlQuery=e(/(#{validateUrlPchar}|\/|\?)*/i),r.txt.regexen.validateUrlFragment=e(/(#{validateUrlPchar}|\/|\?)*/i),r.txt.regexen.validateUrlUnencoded=e("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");var p="tweet-url list-slug",h={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,targetBlank:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0,htmlEscapeNonEntities:!0},m={disabled:!0,readonly:!0,multiple:!0,checked:!0};r.txt.tagAttrs=function(e){var t="";for(var i in e){var n=e[i];m[i]&&(n=n?i:null),null!=n&&(t+=" "+r.txt.htmlEscape(i)+'="'+r.txt.htmlEscape(n.toString())+'"')}return t},r.txt.linkToText=function(e,i,n,o){o.suppressNoFollow||(n.rel="nofollow"),o.linkAttributeBlock&&o.linkAttributeBlock(e,n),o.linkTextBlock&&(i=o.linkTextBlock(e,i));var s={text:i,attr:r.txt.tagAttrs(n)};return t("<a#{attr}>#{text}</a>",s)},r.txt.linkToTextWithSymbol=function(e,t,i,n,o){var s=o.symbolTag?"<"+o.symbolTag+">"+t+"</"+o.symbolTag+">":t;i=r.txt.htmlEscape(i);var a=o.textWithSymbolTag?"<"+o.textWithSymbolTag+">"+i+"</"+o.textWithSymbolTag+">":i;return o.usernameIncludeSymbol||!t.match(r.txt.regexen.atSigns)?r.txt.linkToText(e,s+a,n,o):s+r.txt.linkToText(e,a,n,o)},r.txt.linkToHashtag=function(e,t,i){var o=t.substring(e.indices[0],e.indices[0]+1),s=r.txt.htmlEscape(e.hashtag),a=n(i.htmlAttrs||{});return a.href=i.hashtagUrlBase+s,a.title="#"+s,a["class"]=i.hashtagClass,s.charAt(0).match(r.txt.regexen.rtl_chars)&&(a["class"]+=" rtl"),i.targetBlank&&(a.target="_blank"),r.txt.linkToTextWithSymbol(e,o,s,a,i)},r.txt.linkToCashtag=function(e,t,i){var o=r.txt.htmlEscape(e.cashtag),s=n(i.htmlAttrs||{});return s.href=i.cashtagUrlBase+o,s.title="$"+o,s["class"]=i.cashtagClass,i.targetBlank&&(s.target="_blank"),r.txt.linkToTextWithSymbol(e,"$",o,s,i)},r.txt.linkToMentionAndList=function(e,t,i){var o=t.substring(e.indices[0],e.indices[0]+1),s=r.txt.htmlEscape(e.screenName),a=r.txt.htmlEscape(e.listSlug),l=e.listSlug&&!i.suppressLists,c=n(i.htmlAttrs||{});return c["class"]=l?i.listClass:i.usernameClass,c.href=l?i.listUrlBase+s+a:i.usernameUrlBase+s,l||i.suppressDataScreenName||(c["data-screen-name"]=s),i.targetBlank&&(c.target="_blank"),r.txt.linkToTextWithSymbol(e,o,l?s+a:s,c,i)},r.txt.linkToUrl=function(e,t,i){var o=e.url,s=o,a=r.txt.htmlEscape(s),l=i.urlEntities&&i.urlEntities[o]||e;l.display_url&&(a=r.txt.linkTextWithEntity(l,i));var c=n(i.htmlAttrs||{});return o.match(r.txt.regexen.urlHasProtocol)||(o="http://"+o),c.href=o,i.targetBlank&&(c.target="_blank"),i.urlClass&&(c["class"]=i.urlClass),i.urlTarget&&(c.target=i.urlTarget),!i.title&&l.display_url&&(c.title=l.expanded_url),r.txt.linkToText(e,a,c,i)},r.txt.linkTextWithEntity=function(e,i){var n=e.display_url,o=e.expanded_url,s=n.replace(/…/g,"");if(-1!=o.indexOf(s)){var a=o.indexOf(s),l={displayUrlSansEllipses:s,beforeDisplayUrl:o.substr(0,a),afterDisplayUrl:o.substr(a+s.length),precedingEllipsis:n.match(/^…/)?"…":"",followingEllipsis:n.match(/…$/)?"…":""};for(var c in l)l.hasOwnProperty(c)&&(l[c]=r.txt.htmlEscape(l[c]));return l.invisible=i.invisibleTagAttrs,t("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",l)}return n},r.txt.autoLinkEntities=function(e,t,i){i=n(i||{}),i.hashtagClass=i.hashtagClass||sailrClasses.hashtagClass,i.hashtagUrlBase=i.hashtagUrlBase||sailrUrls.hashtagBase,i.cashtagClass=i.cashtagClass||sailrClasses.cashtagClass,i.cashtagUrlBase=i.cashtagUrlBase||sailrUrls.cashtagBase,i.listClass=i.listClass||p,i.usernameClass=i.usernameClass||sailrClasses.usernameClass,i.usernameUrlBase=i.usernameUrlBase||sailrUrls.usernameBase,i.listUrlBase=i.listUrlBase||"https://sailr.co/",i.htmlAttrs=r.txt.extractHtmlAttrsFromOptions(i),i.invisibleTagAttrs=i.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var o,s,a;if(i.urlEntities){for(o={},s=0,a=i.urlEntities.length;a>s;s++)o[i.urlEntities[s].url]=i.urlEntities[s];i.urlEntities=o}var l="",c=0;t.sort(function(e,t){return e.indices[0]-t.indices[0]});for(var d=i.htmlEscapeNonEntities?r.txt.htmlEscape:function(e){return e},s=0;s<t.length;s++){var u=t[s];l+=d(e.substring(c,u.indices[0])),u.url?l+=r.txt.linkToUrl(u,e,i):u.hashtag?l+=r.txt.linkToHashtag(u,e,i):u.screenName?l+=r.txt.linkToMentionAndList(u,e,i):u.cashtag&&(l+=r.txt.linkToCashtag(u,e,i)),c=u.indices[1]}return l+=d(e.substring(c,e.length))},r.txt.autoLinkWithJSON=function(e,t,i){if(t.user_mentions)for(var n=0;n<t.user_mentions.length;n++)t.user_mentions[n].screenName=t.user_mentions[n].screen_name;if(t.hashtags)for(var n=0;n<t.hashtags.length;n++)t.hashtags[n].hashtag=t.hashtags[n].text;if(t.symbols)for(var n=0;n<t.symbols.length;n++)t.symbols[n].cashtag=t.symbols[n].text;var o=[];for(var s in t)o=o.concat(t[s]);return r.txt.modifyIndicesFromUnicodeToUTF16(e,o),r.txt.autoLinkEntities(e,o,i)},r.txt.extractHtmlAttrsFromOptions=function(e){var t={};for(var i in e){var n=e[i];h[i]||(m[i]&&(n=n?i:null),null!=n&&(t[i]=n))}return t},r.txt.autoLink=function(e,t){var i=r.txt.extractEntitiesWithIndices(e,{extractUrlsWithoutProtocol:!1});return r.txt.autoLinkEntities(e,i,t)},r.txt.autoLinkUsernamesOrLists=function(e,t){var i=r.txt.extractMentionsOrListsWithIndices(e);return r.txt.autoLinkEntities(e,i,t)},r.txt.autoLinkHashtags=function(e,t){var i=r.txt.extractHashtagsWithIndices(e);return r.txt.autoLinkEntities(e,i,t)},r.txt.autoLinkCashtags=function(e,t){var i=r.txt.extractCashtagsWithIndices(e);return r.txt.autoLinkEntities(e,i,t)},r.txt.autoLinkUrlsCustom=function(e,t){var i=r.txt.extractUrlsWithIndices(e,{extractUrlsWithoutProtocol:!1});return r.txt.autoLinkEntities(e,i,t)},r.txt.removeOverlappingEntities=function(e){e.sort(function(e,t){return e.indices[0]-t.indices[0]});for(var t=e[0],i=1;i<e.length;i++)t.indices[1]>e[i].indices[0]?(e.splice(i,1),i--):t=e[i]},r.txt.extractEntitiesWithIndices=function(e,t){var i=r.txt.extractUrlsWithIndices(e,t).concat(r.txt.extractMentionsOrListsWithIndices(e)).concat(r.txt.extractHashtagsWithIndices(e,{checkUrlOverlap:!1})).concat(r.txt.extractCashtagsWithIndices(e));return 0==i.length?[]:(r.txt.removeOverlappingEntities(i),i)},r.txt.extractMentions=function(e){for(var t=[],i=r.txt.extractMentionsWithIndices(e),n=0;n<i.length;n++){var o=i[n].screenName;t.push(o)}return t},r.txt.extractMentionsWithIndices=function(e){for(var t,i=[],n=r.txt.extractMentionsOrListsWithIndices(e),o=0;o<n.length;o++)t=n[o],""==t.listSlug&&i.push({screenName:t.screenName,indices:t.indices});return i},r.txt.extractMentionsOrListsWithIndices=function(e){if(!e||!e.match(r.txt.regexen.atSigns))return[];var t=[];return e.replace(r.txt.regexen.validMentionOrList,function(e,i,n,o,s,a,l){var c=l.slice(a+e.length);if(!c.match(r.txt.regexen.endMentionMatch)){s=s||"";var d=a+i.length,u=d+o.length+s.length+1;t.push({screenName:o,listSlug:s,indices:[d,u]})}}),t},r.txt.extractReplies=function(e){if(!e)return null;var t=e.match(r.txt.regexen.validReply);return!t||RegExp.rightContext.match(r.txt.regexen.endMentionMatch)?null:t[1]},r.txt.extractUrls=function(e,t){for(var i=[],n=r.txt.extractUrlsWithIndices(e,t),o=0;o<n.length;o++)i.push(n[o].url);return i},r.txt.extractUrlsWithIndices=function(e,t){if(t||(t={extractUrlsWithoutProtocol:!0}),!e||(t.extractUrlsWithoutProtocol?!e.match(/\./):!e.match(/:/)))return[];for(var i=[];r.txt.regexen.extractUrl.exec(e);){var n=RegExp.$2,o=RegExp.$3,s=RegExp.$4,a=RegExp.$5,l=RegExp.$7,c=r.txt.regexen.extractUrl.lastIndex,d=c-o.length;if(s)o.match(r.txt.regexen.validTcoUrl)&&(o=RegExp.lastMatch,c=d+o.length),i.push({url:o,indices:[d,c]});else{if(!t.extractUrlsWithoutProtocol||n.match(r.txt.regexen.invalidUrlWithoutProtocolPrecedingChars))continue;var u=null,p=!1,h=0;if(a.replace(r.txt.regexen.validAsciiDomain,function(e){var t=a.indexOf(e,h);h=t+e.length,u={url:e,indices:[d+t,d+h]},p=e.match(r.txt.regexen.invalidShortDomain),p||i.push(u)}),null==u)continue;l&&(p&&i.push(u),u.url=o.replace(a,u.url),u.indices[1]=c)}}return i},r.txt.extractHashtags=function(e){for(var t=[],i=r.txt.extractHashtagsWithIndices(e),n=0;n<i.length;n++)t.push(i[n].hashtag);return t},r.txt.extractHashtagsWithIndices=function(e,t){if(t||(t={checkUrlOverlap:!0}),!e||!e.match(r.txt.regexen.hashSigns))return[];var i=[];if(e.replace(r.txt.regexen.validHashtag,function(e,t,n,o,s,a){var l=a.slice(s+e.length);if(!l.match(r.txt.regexen.endHashtagMatch)){var c=s+t.length,d=c+o.length+1;i.push({hashtag:o,indices:[c,d]})}}),t.checkUrlOverlap){var n=r.txt.extractUrlsWithIndices(e);if(n.length>0){var o=i.concat(n);r.txt.removeOverlappingEntities(o),i=[];for(var s=0;s<o.length;s++)o[s].hashtag&&i.push(o[s])}}return i},r.txt.extractCashtags=function(e){for(var t=[],i=r.txt.extractCashtagsWithIndices(e),n=0;n<i.length;n++)t.push(i[n].cashtag);return t},r.txt.extractCashtagsWithIndices=function(e){if(!e||-1==e.indexOf("$"))return[];var t=[];return e.replace(r.txt.regexen.validCashtag,function(e,i,n,o,r){var s=r+i.length,a=s+o.length+1;t.push({cashtag:o,indices:[s,a]})}),t},r.txt.modifyIndicesFromUnicodeToUTF16=function(e,t){r.txt.convertUnicodeIndices(e,t,!1)},r.txt.modifyIndicesFromUTF16ToUnicode=function(e,t){r.txt.convertUnicodeIndices(e,t,!0)},r.txt.getUnicodeTextLength=function(e){return e.replace(r.txt.regexen.non_bmp_code_pairs," ").length},r.txt.convertUnicodeIndices=function(e,t,i){if(0!=t.length){var n=0,o=0;t.sort(function(e,t){return e.indices[0]-t.indices[0]});for(var r=0,s=t[0];n<e.length;){if(s.indices[0]==(i?n:o)){var a=s.indices[1]-s.indices[0];if(s.indices[0]=i?o:n,s.indices[1]=s.indices[0]+a,r++,r==t.length)break;s=t[r]}var l=e.charCodeAt(n);l>=55296&&56319>=l&&n<e.length-1&&(l=e.charCodeAt(n+1),l>=56320&&57343>=l&&n++),o++,n++}}},r.txt.splitTags=function(e){for(var t,i,n=e.split("<"),o=[],r=0;r<n.length;r+=1)if(i=n[r]){t=i.split(">");for(var s=0;s<t.length;s+=1)o.push(t[s])}else o.push("");return o},r.txt.hitHighlight=function(e,t,i){var n="em";if(t=t||[],i=i||{},0===t.length)return e;var o,s,a,l,c,d,u,p=i.tag||n,h=["<"+p+">","</"+p+">"],m=r.txt.splitTags(e),f="",g=0,v=m[0],b=0,x=0,y=!1,w=v,k=[];
for(o=0;o<t.length;o+=1)for(s=0;s<t[o].length;s+=1)k.push(t[o][s]);for(a=0;a<k.length;a+=1){for(l=k[a],c=h[a%2],d=!1;null!=v&&l>=b+v.length;)f+=w.slice(x),y&&l===b+w.length&&(f+=c,d=!0),m[g+1]&&(f+="<"+m[g+1]+">"),b+=w.length,x=0,g+=2,v=m[g],w=v,y=!1;d||null==v?d||(d=!0,f+=c):(u=l-b,f+=w.slice(x,u)+c,x=u,y=a%2===0?!0:!1)}if(null!=v)for(x<w.length&&(f+=w.slice(x)),a=g+1;a<m.length;a+=1)f+=a%2===0?m[a]:"<"+m[a]+">";return f};var f=140,g=[a(65534),a(65279),a(65535),a(8234),a(8235),a(8236),a(8237),a(8238)];r.txt.getTweetLength=function(e,t){t||(t={short_url_length:22,short_url_length_https:23});var i=r.txt.getUnicodeTextLength(e),n=r.txt.extractUrlsWithIndices(e);r.txt.modifyIndicesFromUTF16ToUnicode(e,n);for(var o=0;o<n.length;o++)i+=n[o].indices[0]-n[o].indices[1],i+=n[o].url.toLowerCase().match(r.txt.regexen.urlHasHttps)?t.short_url_length_https:t.short_url_length;return i},r.txt.isInvalidTweet=function(e){if(!e)return"empty";if(r.txt.getTweetLength(e)>f)return"too_long";for(var t=0;t<g.length;t++)if(e.indexOf(g[t])>=0)return"invalid_characters";return!1},r.txt.isValidTweetText=function(e){return!r.txt.isInvalidTweet(e)},r.txt.isValidUsername=function(e){if(!e)return!1;var t=r.txt.extractMentions(e);return 1===t.length&&t[0]===e.slice(1)};var v=e(/^#{validMentionOrList}$/);if(r.txt.isValidList=function(e){var t=e.match(v);return!(!t||""!=t[1]||!t[4])},r.txt.isValidHashtag=function(e){if(!e)return!1;var t=r.txt.extractHashtags(e);return 1===t.length&&t[0]===e.slice(1)},r.txt.isValidUrl=function(e,t,i){if(null==t&&(t=!0),null==i&&(i=!0),!e)return!1;var n=e.match(r.txt.regexen.validateUrlUnencoded);if(!n||n[0]!==e)return!1;var s=n[1],a=n[2],l=n[3],c=n[4],d=n[5];return(!i||o(s,r.txt.regexen.validateUrlScheme)&&s.match(/^https?$/i))&&o(l,r.txt.regexen.validateUrlPath)&&o(c,r.txt.regexen.validateUrlQuery,!0)&&o(d,r.txt.regexen.validateUrlFragment,!0)?t&&o(a,r.txt.regexen.validateUrlUnicodeAuthority)||!t&&o(a,r.txt.regexen.validateUrlAuthority):!1},"undefined"!=typeof module&&module.exports&&(module.exports=r.txt),"undefined"!=typeof window)if(window.twttr)for(var b in r)window.twttr[b]=r[b];else window.twttr=r}(),"object"==typeof module&&(module.exports=MediumEditor),function(e,t){"use strict";function i(e,t){var i;if(void 0===e)return t;for(i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)===!1&&(e[i]=t[i]);return e}function n(){var t,i,n,o=e.getSelection();if(o.getRangeAt&&o.rangeCount){for(n=[],t=0,i=o.rangeCount;i>t;t+=1)n.push(o.getRangeAt(t));return n}return null}function o(t){var i,n,o=e.getSelection();if(t)for(o.removeAllRanges(),i=0,n=t.length;n>i;i+=1)o.addRange(t[i])}function r(){var e=t.getSelection().anchorNode,i=e&&3===e.nodeType?e.parentNode:e;return i}function s(){var i,n,o,r,s="";if(void 0!==e.getSelection){if(n=e.getSelection(),n.rangeCount){for(r=t.createElement("div"),i=0,o=n.rangeCount;o>i;i+=1)r.appendChild(n.getRangeAt(i).cloneContents());s=r.innerHTML}}else void 0!==t.selection&&"Text"===t.selection.type&&(s=t.selection.createRange().htmlText);return s}function a(e){return!(!e||1!==e.nodeType)}MediumEditor.prototype={defaults:{allowMultiParagraphSelection:!0,anchorInputPlaceholder:"Paste or type a link",anchorPreviewHideDelay:500,buttons:["bold","italic","underline","anchor","header1","header2","quote"],buttonLabels:!1,checkLinkFormat:!1,cleanPastedHTML:!1,delay:0,diffLeft:0,diffTop:-10,disableReturn:!1,disableDoubleReturn:!1,disableToolbar:!1,disableEditing:!1,elementsContainer:!1,firstHeader:"h3",forcePlainText:!0,placeholder:"Type your text",secondHeader:"h4",targetBlank:!1,extensions:{},activeButtonClass:"medium-editor-button-active",firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last"},isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),init:function(e,n){return this.setElementSelection(e),0!==this.elements.length?(this.parentElements=["p","h1","h2","h3","h4","h5","h6","blockquote","pre"],this.id=t.querySelectorAll(".medium-editor-toolbar").length+1,this.options=i(n,this.defaults),this.setup()):void 0},setup:function(){this.isActive=!0,this.initElements().bindSelect().bindPaste().bindWindowActions()},initElements:function(){this.updateElementList();var e,i=!1;for(e=0;e<this.elements.length;e+=1)this.options.disableEditing||this.elements[e].getAttribute("data-disable-editing")||this.elements[e].setAttribute("contentEditable",!0),this.elements[e].setAttribute("data-medium-element",!0),this.bindParagraphCreation(e).bindReturn(e).bindTab(e),this.options.disableToolbar||this.elements[e].getAttribute("data-disable-toolbar")||(i=!0);return i&&(this.options.elementsContainer||(this.options.elementsContainer=t.body),this.initToolbar().bindButtons().bindAnchorForm().bindAnchorPreview()),this},setElementSelection:function(e){this.elementSelection=e,this.updateElementList()},updateElementList:function(){this.elements="string"==typeof this.elementSelection?t.querySelectorAll(this.elementSelection):this.elementSelection,1===this.elements.nodeType&&(this.elements=[this.elements])},serialize:function(){var e,t,i={};for(e=0;e<this.elements.length;e+=1)t=""!==this.elements[e].id?this.elements[e].id:"element-"+e,i[t]={value:this.elements[e].innerHTML.trim()};return i},callExtensions:function(e){if(!(arguments.length<1)){var t,i,n=Array.prototype.slice.call(arguments,1);for(i in this.options.extensions)this.options.extensions.hasOwnProperty(i)&&(t=this.options.extensions[i],void 0!==t[e]&&t[e].apply(t,n))}},bindParagraphCreation:function(e){var i=this;return this.elements[e].addEventListener("keypress",function(e){var i,n=r();32===e.which&&(i=n.tagName.toLowerCase(),"a"===i&&t.execCommand("unlink",!1,null))}),this.elements[e].addEventListener("keyup",function(e){var n,o=r();o&&o.getAttribute("data-medium-element")&&0===o.children.length&&!i.options.disableReturn&&!o.getAttribute("data-disable-return")&&t.execCommand("formatBlock",!1,"p"),13===e.which&&(o=r(),n=o.tagName.toLowerCase(),i.options.disableReturn||this.getAttribute("data-disable-return")||"li"===n||i.isListItemChild(o)||(e.shiftKey||t.execCommand("formatBlock",!1,"p"),"a"===n&&t.execCommand("unlink",!1,null)))}),this},isListItemChild:function(e){for(var t=e.parentNode,i=t.tagName.toLowerCase();-1===this.parentElements.indexOf(i)&&"div"!==i;){if("li"===i)return!0;if(t=t.parentNode,!t||!t.tagName)return!1;i=t.tagName.toLowerCase()}return!1},bindReturn:function(e){var t=this;return this.elements[e].addEventListener("keypress",function(e){if(13===e.which)if(t.options.disableReturn||this.getAttribute("data-disable-return"))e.preventDefault();else if(t.options.disableDoubleReturn||this.getAttribute("data-disable-double-return")){var i=r();i&&"\n"===i.innerText&&e.preventDefault()}}),this},bindTab:function(e){return this.elements[e].addEventListener("keydown",function(e){if(9===e.which){var i=r().tagName.toLowerCase();"pre"===i&&(e.preventDefault(),t.execCommand("insertHtml",null,"    "))}}),this},buttonTemplate:function(e){var t=this.getButtonLabels(this.options.buttonLabels),i={bold:'<button class="medium-editor-action medium-editor-action-bold" data-action="bold" data-element="b">'+t.bold+"</button>",italic:'<button class="medium-editor-action medium-editor-action-italic" data-action="italic" data-element="i">'+t.italic+"</button>",underline:'<button class="medium-editor-action medium-editor-action-underline" data-action="underline" data-element="u">'+t.underline+"</button>",strikethrough:'<button class="medium-editor-action medium-editor-action-strikethrough" data-action="strikethrough" data-element="strike"><strike>A</strike></button>',superscript:'<button class="medium-editor-action medium-editor-action-superscript" data-action="superscript" data-element="sup">'+t.superscript+"</button>",subscript:'<button class="medium-editor-action medium-editor-action-subscript" data-action="subscript" data-element="sub">'+t.subscript+"</button>",anchor:'<button class="medium-editor-action medium-editor-action-anchor" data-action="anchor" data-element="a">'+t.anchor+"</button>",image:'<button class="medium-editor-action medium-editor-action-image" data-action="image" data-element="img">'+t.image+"</button>",header1:'<button class="medium-editor-action medium-editor-action-header1" data-action="append-'+this.options.firstHeader+'" data-element="'+this.options.firstHeader+'">'+t.header1+"</button>",header2:'<button class="medium-editor-action medium-editor-action-header2" data-action="append-'+this.options.secondHeader+'" data-element="'+this.options.secondHeader+'">'+t.header2+"</button>",quote:'<button class="medium-editor-action medium-editor-action-quote" data-action="append-blockquote" data-element="blockquote">'+t.quote+"</button>",orderedlist:'<button class="medium-editor-action medium-editor-action-orderedlist" data-action="insertorderedlist" data-element="ol">'+t.orderedlist+"</button>",unorderedlist:'<button class="medium-editor-action medium-editor-action-unorderedlist" data-action="insertunorderedlist" data-element="ul">'+t.unorderedlist+"</button>",pre:'<button class="medium-editor-action medium-editor-action-pre" data-action="append-pre" data-element="pre">'+t.pre+"</button>",indent:'<button class="medium-editor-action medium-editor-action-indent" data-action="indent" data-element="ul">'+t.indent+"</button>",outdent:'<button class="medium-editor-action medium-editor-action-outdent" data-action="outdent" data-element="ul">'+t.outdent+"</button>"};return i[e]||!1},getButtonLabels:function(e){var t,i,n={bold:"<b>B</b>",italic:"<b><i>I</i></b>",underline:"<b><u>U</u></b>",superscript:"<b>x<sup>1</sup></b>",subscript:"<b>x<sub>1</sub></b>",anchor:"<b>#</b>",image:"<b>image</b>",header1:"<b>H1</b>",header2:"<b>H2</b>",quote:"<b>&ldquo;</b>",orderedlist:"<b>1.</b>",unorderedlist:"<b>&bull;</b>",pre:"<b>0101</b>",indent:"<b>&rarr;</b>",outdent:"<b>&larr;</b>"};if("fontawesome"===e?t={bold:'<i class="fa fa-bold"></i>',italic:'<i class="fa fa-italic"></i>',underline:'<i class="fa fa-underline"></i>',superscript:'<i class="fa fa-superscript"></i>',subscript:'<i class="fa fa-subscript"></i>',anchor:'<i class="fa fa-link"></i>',image:'<i class="fa fa-picture-o"></i>',quote:'<i class="fa fa-quote-right"></i>',orderedlist:'<i class="fa fa-list-ol"></i>',unorderedlist:'<i class="fa fa-list-ul"></i>',pre:'<i class="fa fa-code fa-lg"></i>',indent:'<i class="fa fa-indent"></i>',outdent:'<i class="fa fa-outdent"></i>'}:"object"==typeof e&&(t=e),"object"==typeof t)for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},initToolbar:function(){return this.toolbar?this:(this.toolbar=this.createToolbar(),this.keepToolbarAlive=!1,this.anchorForm=this.toolbar.querySelector(".medium-editor-toolbar-form-anchor"),this.anchorInput=this.anchorForm.querySelector("input"),this.toolbarActions=this.toolbar.querySelector(".medium-editor-toolbar-actions"),this.anchorPreview=this.createAnchorPreview(),this)},createToolbar:function(){var e=t.createElement("div");return e.id="medium-editor-toolbar-"+this.id,e.className="medium-editor-toolbar",e.appendChild(this.toolbarButtons()),e.appendChild(this.toolbarFormAnchor()),this.options.elementsContainer.appendChild(e),e},toolbarButtons:function(){var e,i,n,o,r=this.options.buttons,s=t.createElement("ul");for(s.id="medium-editor-toolbar-actions",s.className="medium-editor-toolbar-actions clearfix",i=0;i<r.length;i+=1)this.options.extensions.hasOwnProperty(r[i])?(o=this.options.extensions[r[i]],n=void 0!==o.getButton?o.getButton():null):n=this.buttonTemplate(r[i]),n&&(e=t.createElement("li"),a(n)?e.appendChild(n):e.innerHTML=n,s.appendChild(e));return s},toolbarFormAnchor:function(){var e=t.createElement("div"),i=t.createElement("input"),n=t.createElement("a");return n.setAttribute("href","#"),n.innerHTML="&times;",i.setAttribute("type","text"),i.setAttribute("placeholder",this.options.anchorInputPlaceholder),e.className="medium-editor-toolbar-form-anchor",e.id="medium-editor-toolbar-form-anchor",e.appendChild(i),e.appendChild(n),e},bindSelect:function(){var e,i=this,n="";for(this.checkSelectionWrapper=function(e){return e&&i.clickingIntoArchorForm(e)?!1:(clearTimeout(n),void(n=setTimeout(function(){i.checkSelection()},i.options.delay)))},t.documentElement.addEventListener("mouseup",this.checkSelectionWrapper),e=0;e<this.elements.length;e+=1)this.elements[e].addEventListener("keyup",this.checkSelectionWrapper),this.elements[e].addEventListener("blur",this.checkSelectionWrapper);return this},checkSelection:function(){var t,i;return this.keepToolbarAlive===!0||this.options.disableToolbar||(t=e.getSelection(),""===t.toString().trim()||this.options.allowMultiParagraphSelection===!1&&this.hasMultiParagraphs()?this.hideToolbarActions():(i=this.getSelectionElement(),!i||i.getAttribute("data-disable-toolbar")?this.hideToolbarActions():this.checkSelectionElement(t,i))),this},clickingIntoArchorForm:function(e){var t=this;return e.type&&"blur"===e.type.toLowerCase()&&e.relatedTarget&&e.relatedTarget===t.anchorInput?!0:!1},hasMultiParagraphs:function(){var e=s().replace(/<[\S]+><\/[\S]+>/gim,""),t=e.match(/<(p|h[0-6]|blockquote)>([\s\S]*?)<\/(p|h[0-6]|blockquote)>/g);return t?t.length:0},checkSelectionElement:function(e,t){var i;for(this.selection=e,this.selectionRange=this.selection.getRangeAt(0),i=0;i<this.elements.length;i+=1)if(this.elements[i]===t)return void this.setToolbarButtonStates().setToolbarPosition().showToolbarActions();this.hideToolbarActions()},getSelectionElement:function(){var t,i,n,o,r=e.getSelection(),s=function(e){var t=e;try{for(;!t.getAttribute("data-medium-element");)t=t.parentNode}catch(i){return!1}return t};try{t=r.getRangeAt(0),i=t.commonAncestorContainer,n=i.parentNode,o=i.getAttribute("data-medium-element")?i:s(n)}catch(a){o=s(n)}return o},setToolbarPosition:function(){var t=50,i=e.getSelection(),n=i.getRangeAt(0),o=n.getBoundingClientRect(),r=this.options.diffLeft-this.toolbar.offsetWidth/2,s=(o.left+o.right)/2,a=this.toolbar.offsetWidth/2;return o.top<t?(this.toolbar.classList.add("medium-toolbar-arrow-over"),this.toolbar.classList.remove("medium-toolbar-arrow-under"),this.toolbar.style.top=t+o.bottom-this.options.diffTop+e.pageYOffset-this.toolbar.offsetHeight+"px"):(this.toolbar.classList.add("medium-toolbar-arrow-under"),this.toolbar.classList.remove("medium-toolbar-arrow-over"),this.toolbar.style.top=o.top+this.options.diffTop+e.pageYOffset-this.toolbar.offsetHeight+"px"),this.toolbar.style.left=a>s?r+a+"px":e.innerWidth-s<a?e.innerWidth+r-a+"px":r+s+"px",this.hideAnchorPreview(),this},setToolbarButtonStates:function(){var e,t=this.toolbarActions.querySelectorAll("button");for(e=0;e<t.length;e+=1)t[e].classList.remove(this.options.activeButtonClass);return this.checkActiveButtons(),this},checkActiveButtons:function(){for(var e=Array.prototype.slice.call(this.elements),t=this.getSelectedParentElement();void 0!==t.tagName&&-1===this.parentElements.indexOf(t.tagName.toLowerCase)&&(this.activateButton(t.tagName.toLowerCase()),this.callExtensions("checkState",t),-1===e.indexOf(t));)t=t.parentNode},activateButton:function(e){var t=this.toolbar.querySelector('[data-element="'+e+'"]');null!==t&&-1===t.className.indexOf(this.options.activeButtonClass)&&(t.className+=" "+this.options.activeButtonClass)},bindButtons:function(){var e,t=this.toolbar.querySelectorAll("button"),i=this,n=function(e){e.preventDefault(),e.stopPropagation(),void 0===i.selection&&i.checkSelection(),this.className.indexOf(i.options.activeButtonClass)>-1?this.classList.remove(i.options.activeButtonClass):this.className+=" "+i.options.activeButtonClass,this.hasAttribute("data-action")&&i.execAction(this.getAttribute("data-action"),e)};for(e=0;e<t.length;e+=1)t[e].addEventListener("click",n);return this.setFirstAndLastItems(t),this},setFirstAndLastItems:function(e){return e.length>0&&(e[0].className+=" "+this.options.firstButtonClass,e[e.length-1].className+=" "+this.options.lastButtonClass),this},execAction:function(i,n){i.indexOf("append-")>-1?(this.execFormatBlock(i.replace("append-","")),this.setToolbarPosition(),this.setToolbarButtonStates()):"anchor"===i?this.triggerAnchorAction(n):"image"===i?t.execCommand("insertImage",!1,e.getSelection()):(t.execCommand(i,!1,null),this.setToolbarPosition())},rangeSelectsSingleNode:function(e){var t=e.startContainer;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===e.startOffset+1},getSelectedParentElement:function(){var e=null,t=this.selectionRange;return e=this.rangeSelectsSingleNode(t)?t.startContainer.childNodes[t.startOffset]:3===t.startContainer.nodeType?t.startContainer.parentNode:t.startContainer},triggerAnchorAction:function(){var e=this.getSelectedParentElement();return e.tagName&&"a"===e.tagName.toLowerCase()?t.execCommand("unlink",!1,null):"block"===this.anchorForm.style.display?this.showToolbarActions():this.showAnchorForm(),this},execFormatBlock:function(e){var i=this.getSelectionData(this.selection.anchorNode);if("blockquote"===e&&i.el&&"blockquote"===i.el.parentNode.tagName.toLowerCase())return t.execCommand("outdent",!1,null);if(i.tagName===e&&(e="p"),this.isIE){if("blockquote"===e)return t.execCommand("indent",!1,e);e="<"+e+">"}return t.execCommand("formatBlock",!1,e)},getSelectionData:function(e){var t;for(e&&e.tagName&&(t=e.tagName.toLowerCase());e&&-1===this.parentElements.indexOf(t);)e=e.parentNode,e&&e.tagName&&(t=e.tagName.toLowerCase());return{el:e,tagName:t}},getFirstChild:function(e){for(var t=e.firstChild;null!==t&&1!==t.nodeType;)t=t.nextSibling;return t},hideToolbarActions:function(){this.keepToolbarAlive=!1,void 0!==this.toolbar&&this.toolbar.classList.remove("medium-editor-toolbar-active")},showToolbarActions:function(){var e,t=this;this.anchorForm.style.display="none",this.toolbarActions.style.display="block",this.keepToolbarAlive=!1,clearTimeout(e),e=setTimeout(function(){t.toolbar&&!t.toolbar.classList.contains("medium-editor-toolbar-active")&&t.toolbar.classList.add("medium-editor-toolbar-active")},100)},saveSelection:function(){this.savedSelection=n()},restoreSelection:function(){o(this.savedSelection)},showAnchorForm:function(e){this.toolbarActions.style.display="none",this.saveSelection(),this.anchorForm.style.display="block",this.keepToolbarAlive=!0,this.anchorInput.focus(),this.anchorInput.value=e||""},bindAnchorForm:function(){var e=this.anchorForm.querySelector("a"),t=this;return this.anchorForm.addEventListener("click",function(e){e.stopPropagation()}),this.anchorInput.addEventListener("keyup",function(e){13===e.keyCode&&(e.preventDefault(),t.createLink(this))}),this.anchorInput.addEventListener("click",function(e){e.stopPropagation(),t.keepToolbarAlive=!0}),this.anchorInput.addEventListener("blur",function(){t.keepToolbarAlive=!1,t.checkSelection()}),e.addEventListener("click",function(e){e.preventDefault(),t.showToolbarActions(),o(t.savedSelection)}),this},hideAnchorPreview:function(){this.anchorPreview.classList.remove("medium-editor-anchor-preview-active")},showAnchorPreview:function(t){if(this.anchorPreview.classList.contains("medium-editor-anchor-preview-active"))return!0;var i,n,o,r=this,s=40,a=t.getBoundingClientRect(),l=(a.left+a.right)/2;return r.anchorPreview.querySelector("i").textContent=t.href,i=r.anchorPreview.offsetWidth/2,n=r.options.diffLeft-i,clearTimeout(o),o=setTimeout(function(){r.anchorPreview&&!r.anchorPreview.classList.contains("medium-editor-anchor-preview-active")&&r.anchorPreview.classList.add("medium-editor-anchor-preview-active")},100),r.observeAnchorPreview(t),r.anchorPreview.classList.add("medium-toolbar-arrow-over"),r.anchorPreview.classList.remove("medium-toolbar-arrow-under"),r.anchorPreview.style.top=Math.round(s+a.bottom-r.options.diffTop+e.pageYOffset-r.anchorPreview.offsetHeight)+"px",r.anchorPreview.style.left=i>l?n+i+"px":e.innerWidth-l<i?e.innerWidth+n-i+"px":n+l+"px",this},observeAnchorPreview:function(e){var t=this,i=(new Date).getTime(),n=!0,o=function(){i=(new Date).getTime(),n=!0},r=function(e){e.relatedTarget&&/anchor-preview/.test(e.relatedTarget.className)||(n=!1)},s=setInterval(function(){if(n)return!0;var a=(new Date).getTime()-i;a>t.options.anchorPreviewHideDelay&&(t.hideAnchorPreview(),clearInterval(s),t.anchorPreview.removeEventListener("mouseover",o),t.anchorPreview.removeEventListener("mouseout",r),e.removeEventListener("mouseover",o),e.removeEventListener("mouseout",r))},200);t.anchorPreview.addEventListener("mouseover",o),t.anchorPreview.addEventListener("mouseout",r),e.addEventListener("mouseover",o),e.addEventListener("mouseout",r)},createAnchorPreview:function(){var e=this,i=t.createElement("div");return i.id="medium-editor-anchor-preview-"+this.id,i.className="medium-editor-anchor-preview",i.innerHTML=this.anchorPreviewTemplate(),this.options.elementsContainer.appendChild(i),i.addEventListener("click",function(){e.anchorPreviewClickHandler()}),i},anchorPreviewTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <i class="medium-editor-toolbar-anchor-preview-inner"></i></div>'},anchorPreviewClickHandler:function(){if(this.activeAnchor){var i=this,n=t.createRange(),o=e.getSelection();n.selectNodeContents(i.activeAnchor),o.removeAllRanges(),o.addRange(n),setTimeout(function(){i.activeAnchor&&i.showAnchorForm(i.activeAnchor.href),i.keepToolbarAlive=!1},100+i.options.delay)}this.hideAnchorPreview()},editorAnchorObserver:function(e){var t=this,i=!0,n=function(){i=!1,t.activeAnchor.removeEventListener("mouseout",n)};if(e.target&&"a"===e.target.tagName.toLowerCase()){if(!/href=["']\S+["']/.test(e.target.outerHTML)||/href=["']#\S+["']/.test(e.target.outerHTML))return!0;if(this.toolbar.classList.contains("medium-editor-toolbar-active"))return!0;this.activeAnchor=e.target,this.activeAnchor.addEventListener("mouseout",n),setTimeout(function(){i&&t.showAnchorPreview(e.target)},t.options.delay)}},bindAnchorPreview:function(){var e,t=this;for(this.editorAnchorObserverWrapper=function(e){t.editorAnchorObserver(e)},e=0;e<this.elements.length;e+=1)this.elements[e].addEventListener("mouseover",this.editorAnchorObserverWrapper);return this},checkLinkFormat:function(e){var t=/^https?:\/\//;return e.match(t)?e:"http://"+e},setTargetBlank:function(){var e,t=r();if("a"===t.tagName.toLowerCase())t.target="_blank";else for(t=t.getElementsByTagName("a"),e=0;e<t.length;e+=1)t[e].target="_blank"},createLink:function(e){return 0===e.value.trim().length?void this.hideToolbarActions():(o(this.savedSelection),this.options.checkLinkFormat&&(e.value=this.checkLinkFormat(e.value)),t.execCommand("createLink",!1,e.value),this.options.targetBlank&&this.setTargetBlank(),this.checkSelection(),this.showToolbarActions(),void(e.value=""))},bindWindowActions:function(){var t,i=this;return this.windowResizeHandler=function(){clearTimeout(t),t=setTimeout(function(){i.toolbar&&i.toolbar.classList.contains("medium-editor-toolbar-active")&&i.setToolbarPosition()},100)},e.addEventListener("resize",this.windowResizeHandler),this},activate:function(){this.isActive||this.setup()},deactivate:function(){var i;if(this.isActive)for(this.isActive=!1,void 0!==this.toolbar&&(this.options.elementsContainer.removeChild(this.anchorPreview),this.options.elementsContainer.removeChild(this.toolbar),delete this.toolbar,delete this.anchorPreview),t.documentElement.removeEventListener("mouseup",this.checkSelectionWrapper),e.removeEventListener("resize",this.windowResizeHandler),i=0;i<this.elements.length;i+=1)this.elements[i].removeEventListener("mouseover",this.editorAnchorObserverWrapper),this.elements[i].removeEventListener("keyup",this.checkSelectionWrapper),this.elements[i].removeEventListener("blur",this.checkSelectionWrapper),this.elements[i].removeEventListener("paste",this.pasteWrapper),this.elements[i].removeAttribute("contentEditable"),this.elements[i].removeAttribute("data-medium-element")},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},bindPaste:function(){var e,i=this;for(this.pasteWrapper=function(e){var n,o,r="";if(this.classList.remove("medium-editor-placeholder"),!i.options.forcePlainText&&!i.options.cleanPastedHTML)return this;if(e.clipboardData&&e.clipboardData.getData&&!e.defaultPrevented){if(e.preventDefault(),i.options.cleanPastedHTML&&e.clipboardData.getData("text/html"))return i.cleanPaste(e.clipboardData.getData("text/html"));if(i.options.disableReturn||this.getAttribute("data-disable-return"))t.execCommand("insertHTML",!1,e.clipboardData.getData("text/plain"));else{for(n=e.clipboardData.getData("text/plain").split(/[\r\n]/g),o=0;o<n.length;o+=1)""!==n[o]&&(r+=navigator.userAgent.match(/firefox/i)&&0===o?i.htmlEntities(n[o]):"<p>"+i.htmlEntities(n[o])+"</p>");t.execCommand("insertHTML",!1,r)}}},e=0;e<this.elements.length;e+=1)this.elements[e].addEventListener("paste",this.pasteWrapper);return this},cleanPaste:function(e){var i,n,o,r=this.getSelectionElement(),s=/<p|<br|<div/.test(e),a=[[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:bold|font-weight:bold;font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:bold[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a\s+href=(&quot;|&rdquo;|&ldquo;|“|”)([^&]+)(&quot;|&rdquo;|&ldquo;|“|”)&gt;/gi),'<a href="$2">']];for(i=0;i<a.length;i+=1)e=e.replace(a[i][0],a[i][1]);if(s)for(n=e.split("<br><br>"),this.pasteHTML("<p>"+n.join("</p><p>")+"</p>"),t.execCommand("insertText",!1,"\n"),n=r.querySelectorAll("p,div,br"),i=0;i<n.length;i+=1)switch(o=n[i],o.tagName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(o);break;case"br":this.filterLineBreak(o)}else this.pasteHTML(e)},pasteHTML:function(e){var i,n,o,r,s=t.createDocumentFragment();for(s.appendChild(t.createElement("body")),r=s.querySelector("body"),r.innerHTML=e,this.cleanupSpans(r),i=r.querySelectorAll("*"),o=0;o<i.length;o+=1)n=i[o],n.removeAttribute("class"),n.removeAttribute("style"),n.removeAttribute("dir"),"meta"===n.tagName.toLowerCase()&&n.parentNode.removeChild(n);t.execCommand("insertHTML",!1,r.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(e){return e&&("p"===e.tagName.toLowerCase()||"div"===e.tagName.toLowerCase())},filterCommonBlocks:function(e){/^\s*$/.test(e.innerText)&&e.parentNode.removeChild(e)},filterLineBreak:function(e){this.isCommonBlock(e.previousElementSibling)?e.parentNode.removeChild(e):!this.isCommonBlock(e.parentNode)||e.parentNode.firstChild!==e&&e.parentNode.lastChild!==e?1===e.parentNode.childElementCount&&this.removeWithParent(e):e.parentNode.removeChild(e)},removeWithParent:function(e){e&&e.parentNode&&(e.parentNode.parentNode&&1===e.parentNode.childElementCount?e.parentNode.parentNode.removeChild(e.parentNode):e.parentNode.removeChild(e.parentNode))},cleanupSpans:function(e){var i,n,o,r=e.querySelectorAll(".replace-with");for(i=0;i<r.length;i+=1)n=r[i],o=t.createElement(n.classList.contains("bold")?"b":"i"),o.innerHTML=n.classList.contains("bold")&&n.classList.contains("italic")?"<i>"+n.innerHTML+"</i>":n.innerHTML,n.parentNode.replaceChild(o,n);for(r=e.querySelectorAll("span"),i=0;i<r.length;i+=1)n=r[i],/^\s*$/.test()?n.parentNode.removeChild(n):n.parentNode.replaceChild(t.createTextNode(n.innerText),n)}}}(window,document),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";var t=window.Slick||{};t=function(){function t(t,n){var o,r,s=this;if(s.defaults={accessibility:!0,appendArrows:e(t),arrows:!0,asNavFor:null,prevArrow:'<button type="button" class="slick-prev">Previous</button>',nextArrow:'<button type="button" class="slick-next">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return'<button type="button">'+(t+1)+"</button>"},dots:!1,draggable:!0,easing:"linear",fade:!1,focusOnSelect:!1,infinite:!0,lazyLoad:"ondemand",onBeforeChange:null,onAfterChange:null,onInit:null,onReInit:null,pauseOnHover:!0,pauseOnDotsHover:!1,responsive:null,slide:"div",slidesToShow:1,slidesToScroll:1,speed:300,swipe:!0,touchMove:!0,touchThreshold:5,useCSS:!0,vertical:!1},s.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentSlide:0,currentLeft:null,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1},e.extend(s,s.initials),s.activeBreakpoint=null,s.animType=null,s.animProp=null,s.breakpoints=[],s.breakpointSettings=[],s.cssTransitions=!1,s.paused=!1,s.positionProp=null,s.$slider=e(t),s.$slidesCache=null,s.transformType=null,s.transitionType=null,s.windowWidth=0,s.windowTimer=null,s.options=e.extend({},s.defaults,n),s.originalSettings=s.options,o=s.options.responsive||null,o&&o.length>-1){for(r in o)o.hasOwnProperty(r)&&(s.breakpoints.push(o[r].breakpoint),s.breakpointSettings[o[r].breakpoint]=o[r].settings);s.breakpoints.sort(function(e,t){return t-e})}s.autoPlay=e.proxy(s.autoPlay,s),s.autoPlayClear=e.proxy(s.autoPlayClear,s),s.changeSlide=e.proxy(s.changeSlide,s),s.selectHandler=e.proxy(s.selectHandler,s),s.setPosition=e.proxy(s.setPosition,s),s.swipeHandler=e.proxy(s.swipeHandler,s),s.dragHandler=e.proxy(s.dragHandler,s),s.keyHandler=e.proxy(s.keyHandler,s),s.autoPlayIterator=e.proxy(s.autoPlayIterator,s),s.instanceUid=i++,s.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,s.init()}var i=0;return t}(),t.prototype.addSlide=function(t,i,n){var o=this;if("boolean"==typeof i)n=i,i=null;else if(0>i||i>=o.slideCount)return!1;o.unload(),"number"==typeof i?0===i&&0===o.$slides.length?e(t).appendTo(o.$slideTrack):n?e(t).insertBefore(o.$slides.eq(i)):e(t).insertAfter(o.$slides.eq(i)):n===!0?e(t).prependTo(o.$slideTrack):e(t).appendTo(o.$slideTrack),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).remove(),o.$slideTrack.append(o.$slides),o.$slides.each(function(t,i){e(i).attr("index",t)}),o.$slidesCache=o.$slides,o.reinit()},t.prototype.animateSlide=function(t,i){var n={},o=this;o.transformsEnabled===!1?o.options.vertical===!1?o.$slideTrack.animate({left:t},o.options.speed,o.options.easing,i):o.$slideTrack.animate({top:t},o.options.speed,o.options.easing,i):o.cssTransitions===!1?e({animStart:o.currentLeft}).animate({animStart:t},{duration:o.options.speed,easing:o.options.easing,step:function(e){o.options.vertical===!1?(n[o.animType]="translate("+e+"px, 0px)",o.$slideTrack.css(n)):(n[o.animType]="translate(0px,"+e+"px)",o.$slideTrack.css(n))},complete:function(){i&&i.call()}}):(o.applyTransition(),n[o.animType]=o.options.vertical===!1?"translate3d("+t+"px, 0px, 0px)":"translate3d(0px,"+t+"px, 0px)",o.$slideTrack.css(n),i&&setTimeout(function(){o.disableTransition(),i.call()},o.options.speed))},t.prototype.applyTransition=function(e){var t=this,i={};i[t.transitionType]=t.options.fade===!1?t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:"opacity "+t.options.speed+"ms "+t.options.cssEase,t.options.fade===!1?t.$slideTrack.css(i):t.$slides.eq(e).css(i)},t.prototype.autoPlay=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer),e.slideCount>e.options.slidesToShow&&e.paused!==!0&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var t=this,i=null!=t.options.asNavFor?e(t.options.asNavFor).getSlick():null;t.options.infinite===!1?1===t.direction?(t.currentSlide+1===t.slideCount-1&&(t.direction=0),t.slideHandler(t.currentSlide+t.options.slidesToScroll),null!=i&&i.slideHandler(i.currentSlide+i.options.slidesToScroll)):(t.currentSlide-1===0&&(t.direction=1),t.slideHandler(t.currentSlide-t.options.slidesToScroll),null!=i&&i.slideHandler(i.currentSlide-i.options.slidesToScroll)):(t.slideHandler(t.currentSlide+t.options.slidesToScroll),null!=i&&i.slideHandler(i.currentSlide+i.options.slidesToScroll))
},t.prototype.buildArrows=function(){var t=this;t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow=e(t.options.prevArrow),t.$nextArrow=e(t.options.nextArrow),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.appendTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),t.options.infinite!==!0&&t.$prevArrow.addClass("slick-disabled"))},t.prototype.buildDots=function(){var t,i,n=this;if(n.options.dots===!0&&n.slideCount>n.options.slidesToShow){for(i='<ul class="slick-dots">',t=0;t<=n.getDotCount();t+=1)i+="<li>"+n.options.customPaging.call(this,n,t)+"</li>";i+="</ul>",n.$dots=e(i).appendTo(n.$slider),n.$dots.find("li").first().addClass("slick-active")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,i){e(i).attr("index",t)}),t.$slidesCache=t.$slides,t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),t.options.centerMode===!0&&(t.options.slidesToScroll=1,t.options.slidesToShow%2===0&&(t.options.slidesToShow=3)),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.options.accessibility===!0&&t.$list.prop("tabIndex",0),t.setSlideClasses("number"==typeof this.currentSlide?this.currentSlide:0),t.options.draggable===!0&&t.$list.addClass("draggable")},t.prototype.checkResponsive=function(){var t,i,n=this;if(n.originalSettings.responsive&&n.originalSettings.responsive.length>-1&&null!==n.originalSettings.responsive){i=null;for(t in n.breakpoints)n.breakpoints.hasOwnProperty(t)&&e(window).width()<n.breakpoints[t]&&(i=n.breakpoints[t]);null!==i?null!==n.activeBreakpoint?i!==n.activeBreakpoint&&(n.activeBreakpoint=i,n.options=e.extend({},n.options,n.breakpointSettings[i]),n.refresh()):(n.activeBreakpoint=i,n.options=e.extend({},n.options,n.breakpointSettings[i]),n.refresh()):null!==n.activeBreakpoint&&(n.activeBreakpoint=null,n.options=e.extend({},n.options,n.originalSettings),n.refresh())}},t.prototype.changeSlide=function(t){var i=this,n=e(t.target),o=null!=i.options.asNavFor?e(i.options.asNavFor).getSlick():null;switch(n.is("a")&&t.preventDefault(),t.data.message){case"previous":i.slideCount>i.options.slidesToShow&&(i.slideHandler(i.currentSlide-i.options.slidesToScroll),null!=o&&o.slideHandler(o.currentSlide-o.options.slidesToScroll));break;case"next":i.slideCount>i.options.slidesToShow&&(i.slideHandler(i.currentSlide+i.options.slidesToScroll),null!=o&&o.slideHandler(o.currentSlide+o.options.slidesToScroll));break;case"index":var r=e(t.target).parent().index()*i.options.slidesToScroll;i.slideHandler(r),null!=o&&o.slideHandler(r);break;default:return!1}},t.prototype.destroy=function(){var t=this;t.autoPlayClear(),t.touchObject={},e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&(t.$prevArrow.remove(),t.$nextArrow.remove()),t.$slides.parent().hasClass("slick-track")&&t.$slides.unwrap().unwrap(),t.$slides.removeClass("slick-slide slick-active slick-visible").removeAttr("style"),t.$slider.removeClass("slick-slider"),t.$slider.removeClass("slick-initialized"),t.$list.off(".slick"),e(window).off(".slick-"+t.instanceUid)},t.prototype.disableTransition=function(e){var t=this,i={};i[t.transitionType]="",t.options.fade===!1?t.$slideTrack.css(i):t.$slides.eq(e).css(i)},t.prototype.fadeSlide=function(e,t){var i=this;i.cssTransitions===!1?(i.$slides.eq(e).css({zIndex:1e3}),i.$slides.eq(e).animate({opacity:1},i.options.speed,i.options.easing,t)):(i.applyTransition(e),i.$slides.eq(e).css({opacity:1,zIndex:1e3}),t&&setTimeout(function(){i.disableTransition(e),t.call()},i.options.speed))},t.prototype.filterSlides=function(e){var t=this;null!==e&&(t.unload(),t.$slideTrack.children(this.options.slide).remove(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.getCurrent=function(){var e=this;return e.currentSlide},t.prototype.getDotCount=function(){var e,t=this,i=0,n=0,o=0;for(e=t.options.infinite===!0?t.slideCount+t.options.slidesToShow-t.options.slidesToScroll:t.slideCount;e>i;)o++,n+=t.options.slidesToScroll,i=n+t.options.slidesToShow;return o},t.prototype.getLeft=function(e){var t,i,n=this,o=0;return n.slideOffset=0,i=n.$slides.first().outerHeight(),n.options.infinite===!0?(n.slideCount>n.options.slidesToShow&&(n.slideOffset=n.slideWidth*n.options.slidesToShow*-1,o=i*n.options.slidesToShow*-1),n.slideCount%n.options.slidesToScroll!==0&&e+n.options.slidesToScroll>n.slideCount&&n.slideCount>n.options.slidesToShow&&(n.slideOffset=n.slideCount%n.options.slidesToShow*n.slideWidth*-1,o=n.slideCount%n.options.slidesToShow*i*-1)):n.slideCount%n.options.slidesToShow!==0&&e+n.options.slidesToScroll>n.slideCount&&n.slideCount>n.options.slidesToShow&&(n.slideOffset=n.options.slidesToShow*n.slideWidth-n.slideCount%n.options.slidesToShow*n.slideWidth,o=n.slideCount%n.options.slidesToShow*i),n.options.centerMode===!0&&n.options.infinite===!0?n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)-n.slideWidth:n.options.centerMode===!0&&(n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)),t=n.options.vertical===!1?e*n.slideWidth*-1+n.slideOffset:e*i*-1+o},t.prototype.init=function(){var t=this;e(t.$slider).hasClass("slick-initialized")||(e(t.$slider).addClass("slick-initialized"),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.checkResponsive()),null!==t.options.onInit&&t.options.onInit.call(this,t)},t.prototype.initArrowEvents=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.on("click.slick",{message:"next"},e.changeSlide))},t.prototype.initDotEvents=function(){var t=this;t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),t.options.dots===!0&&t.options.pauseOnDotsHover===!0&&t.options.autoplay===!0&&e("li",t.$dots).on("mouseenter.slick",t.autoPlayClear).on("mouseleave.slick",t.autoPlay)},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.options.pauseOnHover===!0&&t.options.autoplay===!0&&(t.$list.on("mouseenter.slick",t.autoPlayClear),t.$list.on("mouseleave.slick",t.autoPlay)),t.options.accessibility===!0&&t.$list.on("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.options.slide,t.$slideTrack).on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,function(){t.checkResponsive(),t.setPosition()}),e(window).on("resize.slick.slick-"+t.instanceUid,function(){e(window).width!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.setPosition()},50))}),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).on("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.initUI=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.show(),e.options.autoplay===!0&&e.autoPlay()},t.prototype.keyHandler=function(e){var t=this;37===e.keyCode?t.changeSlide({data:{message:"previous"}}):39===e.keyCode&&t.changeSlide({data:{message:"next"}})},t.prototype.lazyLoad=function(){function t(t){e("img[data-lazy]",t).each(function(){var t=e(this),i=e(this).attr("data-lazy");t.css({opacity:0}).attr("src",i).removeAttr("data-lazy").removeClass("slick-loading").load(function(){t.animate({opacity:1},200)})})}var i,n,o,r,s=this;s.options.centerMode===!0||s.options.fade===!0?(o=s.options.slidesToShow+s.currentSlide-1,r=o+s.options.slidesToShow+2):(o=s.options.infinite?s.options.slidesToShow+s.currentSlide:s.currentSlide,r=o+s.options.slidesToShow),i=s.$slider.find(".slick-slide").slice(o,r),t(i),1==s.slideCount?(n=s.$slider.find(".slick-slide"),t(n)):s.currentSlide>=s.slideCount-s.options.slidesToShow?(n=s.$slider.find(".slick-cloned").slice(0,s.options.slidesToShow),t(n)):0===s.currentSlide&&(n=s.$slider.find(".slick-cloned").slice(-1*s.options.slidesToShow),t(n))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},t.prototype.postSlide=function(e){var t=this;null!==t.options.onAfterChange&&t.options.onAfterChange.call(this,t,e),t.animating=!1,t.setPosition(),t.swipeLeft=null,t.options.autoplay===!0&&t.paused===!1&&t.autoPlay()},t.prototype.progressiveLazyLoad=function(){var t,i,n=this;t=e("img[data-lazy]").length,t>0&&(i=e("img[data-lazy]",n.$slider).first(),i.attr("src",i.attr("data-lazy")).removeClass("slick-loading").load(function(){i.removeAttr("data-lazy"),n.progressiveLazyLoad()}))},t.prototype.refresh=function(){var t=this,i=t.currentSlide;t.destroy(),e.extend(t,t.initials),t.currentSlide=i,t.init()},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.options.focusOnSelect===!0&&e(t.options.slide,t.$slideTrack).on("click.slick",t.selectHandler),t.setSlideClasses(0),t.setPosition(),null!==t.options.onReInit&&t.options.onReInit.call(this,t)},t.prototype.removeSlide=function(e,t){var i=this;return"boolean"==typeof e?(t=e,e=t===!0?0:i.slideCount-1):e=t===!0?--e:e,i.slideCount<1||0>e||e>i.slideCount-1?!1:(i.unload(),i.$slideTrack.children(this.options.slide).eq(e).remove(),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).remove(),i.$slideTrack.append(i.$slides),i.$slidesCache=i.$slides,void i.reinit())},t.prototype.setCSS=function(e){var t,i,n=this,o={};t="left"==n.positionProp?e+"px":"0px",i="top"==n.positionProp?e+"px":"0px",o[n.positionProp]=e,n.transformsEnabled===!1?n.$slideTrack.css(o):(o={},n.cssTransitions===!1?(o[n.animType]="translate("+t+", "+i+")",n.$slideTrack.css(o)):(o[n.animType]="translate3d("+t+", "+i+", 0px)",n.$slideTrack.css(o)))},t.prototype.setDimensions=function(){var e=this;e.$slideTrack.children(".slick-slide").width(e.options.centerMode===!0?e.slideWidth:e.slideWidth),e.options.vertical===!1?(e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length)),e.options.centerMode===!0&&e.$list.css({padding:"0px "+e.options.centerPadding})):(e.$list.height(e.$slides.first().outerHeight()*e.options.slidesToShow),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight()*e.$slideTrack.children(".slick-slide").length)),e.options.centerMode===!0&&e.$list.css({padding:e.options.centerPadding+" 0px"}))},t.prototype.setFade=function(){var t,i=this;i.$slides.each(function(n,o){t=i.slideWidth*n*-1,e(o).css({position:"relative",left:t,top:0,zIndex:800,opacity:0})}),i.$slides.eq(i.currentSlide).css({zIndex:900,opacity:1})},t.prototype.setPosition=function(){var e=this;e.setValues(),e.setDimensions(),e.options.fade===!1?e.setCSS(e.getLeft(e.currentSlide)):e.setFade()},t.prototype.setProps=function(){var e=this;e.positionProp=e.options.vertical===!0?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),(void 0!==document.body.style.WebkitTransition||void 0!==document.body.style.MozTransition||void 0!==document.body.style.msTransition)&&e.options.useCSS===!0&&(e.cssTransitions=!0),void 0!==document.body.style.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition"),void 0!==document.body.style.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition"),void 0!==document.body.style.msTransform&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=null!==e.animType},t.prototype.setValues=function(){var e=this;e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),e.slideWidth=Math.ceil(e.options.vertical===!1?e.listWidth/e.options.slidesToShow:e.listWidth)},t.prototype.setSlideClasses=function(e){var t,i,n,o=this;o.$slider.find(".slick-slide").removeClass("slick-active").removeClass("slick-center"),i=o.$slider.find(".slick-slide"),o.options.centerMode===!0?(t=Math.floor(o.options.slidesToShow/2),o.options.infinite===!0&&(e>=t&&e<=o.slideCount-1-t?o.$slides.slice(e-t,e+t+1).addClass("slick-active"):(n=o.options.slidesToShow+e,i.slice(n-t+1,n+t+2).addClass("slick-active")),0===e?i.eq(i.length-1-o.options.slidesToShow).addClass("slick-center"):e===o.slideCount-1&&i.eq(o.options.slidesToShow).addClass("slick-center")),o.$slides.eq(e).addClass("slick-center")):e>0&&e<o.slideCount-o.options.slidesToShow?o.$slides.slice(e,e+o.options.slidesToShow).addClass("slick-active"):i.length<=o.options.slidesToShow?i.addClass("slick-active"):(n=o.options.infinite===!0?o.options.slidesToShow+e:e,i.slice(n,n+o.options.slidesToShow).addClass("slick-active")),"ondemand"===o.options.lazyLoad&&o.lazyLoad()},t.prototype.setupInfinite=function(){var t,i,n,o=this;if((o.options.fade===!0||o.options.vertical===!0)&&(o.options.centerMode=!1),o.options.infinite===!0&&o.options.fade===!1&&(i=null,o.slideCount>o.options.slidesToShow)){for(n=o.options.centerMode===!0?o.options.slidesToShow+1:o.options.slidesToShow,t=o.slideCount;t>o.slideCount-n;t-=1)i=t-1,e(o.$slides[i]).clone().attr("id","").prependTo(o.$slideTrack).addClass("slick-cloned");for(t=0;n>t;t+=1)i=t,e(o.$slides[i]).clone().attr("id","").appendTo(o.$slideTrack).addClass("slick-cloned");o.$slideTrack.find(".slick-cloned").find("[id]").each(function(){e(this).attr("id","")})}},t.prototype.selectHandler=function(t){var i=this,n=null!=i.options.asNavFor?e(i.options.asNavFor).getSlick():null,o=parseInt(e(t.target).parent().attr("index"));if(o||(o=0),!(i.slideCount<=i.options.slidesToShow)&&(i.slideHandler(o),null!=n)){if(n.slideCount<=n.options.slidesToShow)return;n.slideHandler(o)}},t.prototype.slideHandler=function(e){var t,i,n,o,r=null,s=this;return s.animating===!0?!1:(t=e,r=s.getLeft(t),n=s.getLeft(s.currentSlide),o=s.slideCount%s.options.slidesToScroll!==0?s.options.slidesToScroll:0,s.currentLeft=null===s.swipeLeft?n:s.swipeLeft,s.options.infinite===!1&&s.options.centerMode===!1&&(0>e||e>s.slideCount-s.options.slidesToShow+o)?(s.options.fade===!1&&(t=s.currentSlide,s.animateSlide(n,function(){s.postSlide(t)})),!1):s.options.infinite===!1&&s.options.centerMode===!0&&(0>e||e>s.slideCount-s.options.slidesToScroll)?(s.options.fade===!1&&(t=s.currentSlide,s.animateSlide(n,function(){s.postSlide(t)})),!1):(s.options.autoplay===!0&&clearInterval(s.autoPlayTimer),i=0>t?s.slideCount%s.options.slidesToScroll!==0?s.slideCount-s.slideCount%s.options.slidesToScroll:s.slideCount-s.options.slidesToScroll:t>s.slideCount-1?0:t,s.animating=!0,null!==s.options.onBeforeChange&&e!==s.currentSlide&&s.options.onBeforeChange.call(this,s,s.currentSlide,i),s.currentSlide=i,s.setSlideClasses(s.currentSlide),s.updateDots(),s.updateArrows(),s.options.fade===!0?(s.fadeSlide(i,function(){s.postSlide(i)}),!1):void s.animateSlide(r,function(){s.postSlide(i)})))},t.prototype.startLoad=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.swipeDirection=function(){var e,t,i,n,o=this;return e=o.touchObject.startX-o.touchObject.curX,t=o.touchObject.startY-o.touchObject.curY,i=Math.atan2(t,e),n=Math.round(180*i/Math.PI),0>n&&(n=360-Math.abs(n)),45>=n&&n>=0?"left":360>=n&&n>=315?"left":n>=135&&225>=n?"right":"vertical"},t.prototype.swipeEnd=function(t){var i=this,n=null!=i.options.asNavFor?e(i.options.asNavFor).getSlick():null;if(i.dragging=!1,void 0===i.touchObject.curX)return!1;if(i.touchObject.swipeLength>=i.touchObject.minSwipe)switch(e(t.target).on("click.slick",function(t){t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e(t.target).off("click.slick")}),i.swipeDirection()){case"left":i.slideHandler(i.currentSlide+i.options.slidesToScroll),null!=n&&n.slideHandler(n.currentSlide+n.options.slidesToScroll),i.touchObject={};break;case"right":i.slideHandler(i.currentSlide-i.options.slidesToScroll),null!=n&&n.slideHandler(n.currentSlide-n.options.slidesToScroll),i.touchObject={}}else i.touchObject.startX!==i.touchObject.curX&&(i.slideHandler(i.currentSlide),null!=n&&n.slideHandler(n.currentSlide),i.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(!(t.options.swipe===!1||"ontouchend"in document&&t.options.swipe===!1||t.options.draggable===!1||t.options.draggable===!1&&!e.originalEvent.touches))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},t.prototype.swipeMove=function(e){var t,i,n,o,r=this;return o=void 0!==e.originalEvent?e.originalEvent.touches:null,t=r.getLeft(r.currentSlide),!r.dragging||o&&1!==o.length?!1:(r.touchObject.curX=void 0!==o?o[0].pageX:e.clientX,r.touchObject.curY=void 0!==o?o[0].pageY:e.clientY,r.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(r.touchObject.curX-r.touchObject.startX,2))),i=r.swipeDirection(),"vertical"!==i?(void 0!==e.originalEvent&&r.touchObject.swipeLength>4&&e.preventDefault(),n=r.touchObject.curX>r.touchObject.startX?1:-1,r.swipeLeft=r.options.vertical===!1?t+r.touchObject.swipeLength*n:t+r.touchObject.swipeLength*(r.$list.height()/r.listWidth)*n,r.options.fade===!0||r.options.touchMove===!1?!1:r.animating===!0?(r.swipeLeft=null,!1):void r.setCSS(r.swipeLeft)):void 0)},t.prototype.swipeStart=function(e){var t,i=this;return 1!==i.touchObject.fingerCount||i.slideCount<=i.options.slidesToShow?(i.touchObject={},!1):(void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),i.touchObject.startX=i.touchObject.curX=void 0!==t?t.pageX:e.clientX,i.touchObject.startY=i.touchObject.curY=void 0!==t?t.pageY:e.clientY,void(i.dragging=!0))},t.prototype.unfilterSlides=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).remove(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&(t.$prevArrow.remove(),t.$nextArrow.remove()),t.$slides.removeClass("slick-slide slick-active slick-visible").removeAttr("style")},t.prototype.updateArrows=function(){var e=this;e.options.arrows===!0&&e.options.infinite!==!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.removeClass("slick-disabled"),e.$nextArrow.removeClass("slick-disabled"),0===e.currentSlide?(e.$prevArrow.addClass("slick-disabled"),e.$nextArrow.removeClass("slick-disabled")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&(e.$nextArrow.addClass("slick-disabled"),e.$prevArrow.removeClass("slick-disabled")))},t.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active"),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active"))},e.fn.slick=function(e){var i=this;return i.each(function(i,n){n.slick=new t(n,e)})},e.fn.slickAdd=function(e,t,i){var n=this;return n.each(function(n,o){o.slick.addSlide(e,t,i)})},e.fn.slickCurrentSlide=function(){var e=this;return e.get(0).slick.getCurrent()},e.fn.slickFilter=function(e){var t=this;return t.each(function(t,i){i.slick.filterSlides(e)})},e.fn.slickGoTo=function(t){var i=this;return i.each(function(i,n){var o=null!=n.slick.options.asNavFor?e(n.slick.options.asNavFor):null;null!=o&&o.slickGoTo(t),n.slick.slideHandler(t)})},e.fn.slickNext=function(){var e=this;return e.each(function(e,t){t.slick.changeSlide({data:{message:"next"}})})},e.fn.slickPause=function(){var e=this;return e.each(function(e,t){t.slick.autoPlayClear(),t.slick.paused=!0})},e.fn.slickPlay=function(){var e=this;return e.each(function(e,t){t.slick.paused=!1,t.slick.autoPlay()})},e.fn.slickPrev=function(){var e=this;return e.each(function(e,t){t.slick.changeSlide({data:{message:"previous"}})})},e.fn.slickRemove=function(e,t){var i=this;return i.each(function(i,n){n.slick.removeSlide(e,t)})},e.fn.slickGetOption=function(e){var t=this;return t.get(0).slick.options[e]},e.fn.slickSetOption=function(e,t,i){var n=this;return n.each(function(n,o){o.slick.options[e]=t,i===!0&&(o.slick.unload(),o.slick.reinit())})},e.fn.slickUnfilter=function(){var e=this;return e.each(function(e,t){t.slick.unfilterSlides()})},e.fn.unslick=function(){var e=this;return e.each(function(e,t){t.slick&&t.slick.destroy()})},e.fn.getSlick=function(){var e=null,t=this;return t.each(function(t,i){e=i.slick}),e}});var totalPriceText=$("#total-price"),checkoutBtn=$("#checkout-btn");$(document).ready(function(){function e(){"undefined"!=typeof google&&(o=new google.maps.places.Autocomplete(document.getElementById("autocomplete"),{types:["geocode"]}),google.maps.event.addListener(o,"place_changed",function(){t()}))}function t(){var e=o.getPlace();for(var t in r)document.getElementById(t).value="",document.getElementById(t).readOnly=!1;for(var i=0;i<e.address_components.length;i++){var s=e.address_components[i].types[0];if(r[s]){var a=e.address_components[i][r[s]];document.getElementById(s).value=a,document.getElementById(s).readOnly=!0}}$("#hidden-form").show(),n()}$("#autocomplete").show(),$("#hidden-form").hide();var i=0,n=function(){if($("#country").val()==item.country){i=item.price+domesticShippingPrice;{totalPriceText.html(item.currency+i.toFixed(2))}}else i=item.price+internationalShippingPrice,totalPriceText.html(item.currency+i.toFixed(2));checkoutBtn.removeAttr("disabled")};$("#country").change(function(){n()});var o,r={street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"short_name",country:"short_name",postal_code:"short_name"};e()});var unfollowButton=$("#unfollow-btn");unfollowButton.on("mouseover",function(){console.log("MOUSEOVER"),$(this).text("Unfollow"),$(this).addClass("btn-danger")}),unfollowButton.on("mouseleave",function(){unfollowButton.text("Following"),unfollowButton.removeClass("btn-danger")});var mediumEditor=new MediumEditor("[data-md-ed]",{firstHeader:"h3",secondHeader:"h4",cleanPastedHTML:!1,buttons:["bold","italic","anchor","header1","header2","blockquote","unorderedlist"],disableEditing:!1}),app=angular.module("app",["angularFileUpload","ngSanitize"]);app.run(["$rootScope",function(e){e.baseURL=baseURL?baseURL:"https://sailr.co",e.loggedInUser=loggedInUser}]),app.directive("contenteditable",function(){return{restrict:"A",require:"?ngModel",link:function(e,t,i,n){function o(){var e=t.html();i.stripBr&&"<br>"==e&&(e=""),n.$setViewValue(e)}n&&(n.$render=function(){t.html(n.$viewValue)},t.on("blur keyup change input",function(){e.$apply(o)}),o())}}}),app.directive("num-binding",function(){return{restrict:"A",require:"ngModel",scope:{model:"=ngModel"},link:function(e){e.model&&"string"==typeof e.model&&(e.model=parseInt(e.model))}}}),app.directive("sailrFooter",["$document","$window",function(e,t){return{scope:!1,link:function(e,i){var n=function(){var e=document.body.scrollHeight|document.body.clientHeight>t.innerHeight,n=t.document.body.scrollHeight,o=n+"px";i.css(e?{position:"relative",top:"100%"}:{position:"absolute",top:o})};n(),e.$watch(t.innerHeight,function(){n()})}}}]),app.directive("sailrOpactiy",function(){function e(e,t,i){e.sailrOpacity=i.sailrOpacity,t.css({opacity:e.sailrOpacity})}return{restrict:"A",scope:{sailrOpacity:"@"},link:e}}),app.directive("sailrComments",function(){return{restrict:"AE",require:"^sailrProductId",scope:{sailrProductId:"@"},controller:["$scope","$http","CommentsFactory",function(e,t,i){e.comments=[],e.commentOpacity=1,e.webError=!1,e.newComment={},e.loggedInUser=loggedInUser,e.item_id=0,e.getComments=function(t){e.item_id=t;var n=i.getComments(e.item_id);n.then(function(t){e.comments=t.data},function(t){console.log(t),e.webError=!0})},e.postNewComment=function(){var t=e.comments.unshift({item_id:e.item_id,comment:e.newComment.comment,created_at:new Date,user:loggedInUser}),n=i.postNewComment(e.newComment.comment,e.item_id);console.log(i),console.log(n),n.then(function(t){console.log(t),e.newComment.comment=""},function(i){console.log(i),e.comments=e.comments.splice(1,t)})}}],templateUrl:baseURL+"/js/templates/comments/master.html",link:function(e,t,i){e.getComments(i.sailrProductId),e.item_id=i.sailrProductId}}}),app.directive("sailrProductId",function(){return{controller:["$scope",function(){}]}}),app.directive("sailrComment",function(){return{restrict:"AE",scope:{profileImageUrl:"@",username:"@",name:"@",commentText:"@"},controller:["$scope",function(){}],link:function(e,t,i){e.username=i.username,e.name=i.name,e.profileImageUrl=i.profileImageUrl,e.commentText=i.commentText,e.baseURL=baseURL},templateUrl:baseURL+"/js/templates/comments/comment-item.html"}}),app.directive("sailrEntityLink",function(){return{priority:-1,restrict:"AE",scope:!1,link:function(e,t,i){e.$watch(i.sailrEntityLink,function(){var e=t.html();t.html(twttr.txt.autoLink(e))})}}}),app.directive("sailrFeedOnboardBox",function(){return{restrict:"E",scope:!1,templateUrl:baseURL+"/js/templates/onboard/feed/onboard-box.html"}}),app.directive("sailrNumberOfProducts",function(){return{restrict:"A",controller:["$scope",function(){}]}}),app.directive("sailrOffsetBy",function(){return{restrict:"A",controller:["$scope",function(){}]}}),app.directive("sailrProductPreview",function(){return{restrict:"AE",scope:{productTitle:"@",productPreviewImageUrl:"@",productLinkUrl:"@",productSellerUsername:"@",productSellerName:"@",productSellerUrl:"@"},templateUrl:baseURL+"/js/templates/onboard/recent/products/product-preview.html"}}),app.directive("sailrRecentProducts",function(){return{restrict:"AE",require:["sailrNumberOfProducts","sailrOffsetBy"],scope:{sailrNumberOfProducts:"@",sailrOffsetBy:"@"},controller:["$scope","$http","OnboardFactory",function(e,t,i){e.baseURL=baseURL,e.products=[],e.initialValue=0,e.getProducts=function(t,n){i.getRecentProducts(t,n).success(function(t){angular.forEach(t,function(t){e.products.push(t)})}).error(function(){e.webError=!0})}}],templateUrl:baseURL+"/js/templates/onboard/recent/products/master.html",link:function(e,t,i){var n=function(t,i){return e.getProducts(i,t),!0};e.$watch(function(){return[i.sailrNumberOfProducts,i.sailrOffsetBy]},function(){n(e.sailrNumberOfProducts,e.sailrOffsetBy)},!0)}}}),app.directive("focusMe",["$timeout","$parse",function(e,t){return{link:function(i,n,o){var r=t(o.focusMe);i.$watch(r,function(t){console.log("value=",t),t===!0&&e(function(){n[0].focus()})})}}}]),app.directive("imgGallery",function(){return{restrict:"C",scope:!1,link:function(e,t){$(document).ready(function(){t.slick({dots:!0,arrows:!1})})}}}),app.factory("OnboardFactory",["$http",function(e){var t={};return t.getRecentProducts=function(t,i){console.log("OFFSET IS ::"+t),console.log("LIMIT IS:: "+i);var n=baseURL+"/onboard/recent/products/"+t+"/"+i;return e.get(n)},t}]),app.factory("StripeFactory",["$q",function(e){var t={};return t.sayHello=function(){return"HELLO FROM STRIPE FACTORY"},t.setPublishableKey=function(e){Stripe.setPublishableKey(e)},t.createToken=function(i){var n=e.defer();return Stripe.card.createToken(i,function(e,i){i.error?(t.errors=i.error,n.reject(i)):(t.token=i,n.resolve(i))}),n.promise},t.getToken=function(){return t.token},t.getErrors=function(){return t.errors},t}]),app.factory("HelperFactory",function(){var e={};return e.stripWhiteSpace=function(e){return e=e.replace(/\s/g,"")},e.createStripeCardObjectFromFormattedInput=function(t){var i={},n=e.stripWhiteSpace(t.expiry).split("/");return i={number:e.stripWhiteSpace(t.number),cvc:e.stripWhiteSpace(t.cvc),exp_month:n[0],exp_year:n[1]},"undefined"!=typeof t.name&&t.name.length>0&&(i.name=t.name),i},e}),app.factory("SubscriptionFactory",["$q","$rootScope","$http",function(e,t,i){var n={};return n.subscriptionURL=baseURL+"/settings/subscription",console.log("SUBSCRIPTION URL:: "+n.subscriptionURL),n.sayHello=function(){return"HELLO FROM STRIPE FACTORY"},n.createSubscription=function(t,o,r){var s={_token:csrfToken,stripeToken:o,plan:"awesome"};"undefined"!=typeof r&&r.length>0&&(s.coupon=r);var a=e.defer();return i.post(n.subscriptionURL,s).success(function(e){a.resolve(e)}).error(function(e,t,i,n){var o={data:e,status:t,headers:i,config:n};a.reject(o)}),a.promise},n.cancelSubscription=function(){var t={_token:csrfToken},o=e.defer();return i.post(n.subscriptionURL+"/delete",t).success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},n}]),app.factory("CommentsFactory",["$q","$http",function(e,t){var i={};return i.sayHello=function(){return console.log("Hello from CommentsFactory"),"Hello from CommentFactory"},i.postNewComment=function(i,n){console.log("Add new comment function called");var o={_token:csrfToken,comment:i,item_id:n},r=e.defer();return console.log("BASE URL:: "+baseURL),console.log(o),t.post(baseURL+"/comments",o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},i.getComments=function(i){var n=e.defer();return t.get(baseURL+"/username/product/"+i+"/comments").success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},i}]),app.controller("homeController",["$scope",function(e){e.numberOfProducts=3,e.alreadyLoadedNumber=e.numberOfProducts,e.offsetLoadProducts=0,e.loadMoreButtonPressCount=0,e.showNowSignupText=!1,e.loadMore=function(t){e.alreadyLoadedNumber=e.numberOfProducts+e.offsetLoadProducts,e.numberOfProducts=t,e.offsetLoadProducts=e.alreadyLoadedNumber,e.loadMoreButtonPressCount++,e.loadMoreButtonPressCount>2&&!e.showNowSignupText&&(e.showNowSignupText=!0)}}]),app.controller("billingController",["$scope","$http","HelperFactory","StripeFactory",function(e,t,i,n){e.showUpdateCard=!1,e.baseURL=baseURL,e.card={},e.token={},e.posting=!1,e.card.name=usersName,e.card.last4=last4,e.card.type=cardType,e.subscription=subscription,e.updateCard=function(){e.posting=!0;var t=i.createStripeCardObjectFromFormattedInput(e.card),o=n.createToken(t);o.then(function(t){console.log(t),console.log("SUCCESS!"),console.log(n.getToken()),e.token=n.getToken(),e.token.id=n.getToken().id,e.submitUpdate()},function(t){e.posting=!1,console.log("Stripe card fail::::"),console.log(t),humane.log(n.getErrors().message)})},e.submitUpdate=function(){e.posting=!0;var i={stripeToken:e.token.id,_token:csrfToken};t.put(e.baseURL+"/settings/billing",i).success(function(t){e.posting=!1,humane.log(t.message),e.card.last4=e.token.card.last4,e.card.type=e.token.card.type,e.showUpdateCard&&(e.showUpdateCard=!1)}).error(function(t){e.posting=!1,humane.log(t?t.message:"We're afraid something went wrong and the card didn't update"),e.showUpdateCard&&(e.showUpdateCard=!1)})},e.toggleShowingForm=function(){e.showUpdateCard=!e.showUpdateCard}}]),app.controller("feedContentController",["$scope",function(e){e.numberOfProducts=6,e.alreadyLoadedNumber=e.numberOfProducts,e.offsetLoadProducts=0,e.loadMoreRecentProducts=function(t){e.alreadyLoadedNumber=e.numberOfProducts+e.offsetLoadProducts,e.numberOfProducts=t,e.offsetLoadProducts=e.alreadyLoadedNumber
}}]),app.controller("feedController",["$scope","$http",function(e){e.baseURL=baseURL,e.submitSearchForm=function(){window.location=e.baseURL+"/s/"+encodeURIComponent(e.searchText)}}]),app.controller("editController",["$scope","$http","$upload","$timeout","$filter",function(e,t,i,n){"undefined"!=typeof itemModel&&(itemModel.price=parseFloat(itemModel.price),itemModel.initial_units=parseFloat(itemModel.initial_units),itemModel.ship_price=parseFloat(itemModel.ship_price),itemModel.public=parseInt(itemModel.public));e.countries=countries,e.currencies=currencies,e.item={},itemModel.ships_to.length<1&&(itemModel.ships_to=void 0),e.item=itemModel,e.photos=[],e.dataUrls=[],"photos"in e.item&&(e.photos=e.item.photos),document.getElementById("title-heading").innerText=e.item.title,document.getElementById("item-description").innerHTML=e.item.description,document.scope=e,e.buttonPressed=function(){console.log(e.desc),console.log(e)},e.saveChanges=function(){e.posting=!0;var i=e.item;i._token=sessionToken,console.log("the data to be sent is "+JSON.stringify(i)),t.put(updateURL,JSON.stringify(i)).success(function(t){e.posting=!1,e.responseData=t,console.log("The response data is: "),console.log(e.responseData),e.item.description=t.description}).error(function(t){e.posting=!1,console.log(t)})},e.toggleVisibility=function(){e.saveChanges(),e.posting=!0;var i={_token:sessionToken};console.log("the data to be sent is "+JSON.stringify(i)),t.put(updateURL+"/toggle-visibility",JSON.stringify(i)).success(function(t){e.item.public=t.public,e.posting=!1,humane.log(t.message),console.log("The response data is: "),console.log(t)}).error(function(t){e.posting=!1,console.log(t),t.message&&humane.log(t.message),t.errors&&(console.log("ERORROS ARE"),console.log(t.errors),humane.log(t.errors))})},e.isFileBrowserOpen=!1,e.openFileBrowser=function(){e.isFileBrowserOpen||(e.isFileBrowserOpen=!0,document.getElementById("addFiles").click(),e.isFileBrowserOpen=!1),console.log("BUTTON CLICKED")},e.tempURL="",e.uploading=!1,e.onFileSelect=function(t){if(e.uploading)return void humane.log("One at a time please.");for(var o=0;o<t.length;o++){if(t.length>1){humane.log("Please only one photo at a time.. We are only new here.");break}var r=t[o];if(window.FileReader&&r.type.indexOf("image")>-1){var s=new FileReader;s.readAsDataURL(t[o]);var a=!1;if(r.size>7340032)return a=!0,console.log("File too large."),void humane.log("File is too large. Please try compressing it first.");console.log("not too big");{(function(t,i){t.onload=function(t){n(function(){e.dataUrls[i]=t.target.result,console.log(t.target.result),e.photos.push({url:t.target.result}),e.tempURL=t.target.result})}})(s,o)}}console.log(r),humane.log("Uploading..."),e.uploading=!0,e.upload=i.upload({url:baseURL+"/photo/upload/"+itemModel.id,data:{_token:csrfToken},file:r,fileFormDateName:"photo"}).progress(function(e){console.log("percent: "+parseInt(100*e.loaded/e.total))}).success(function(t,i,n){e.photos[e.photos.length-1].set_id=t.set_id,e.photos[e.photos.length-1].url=t.url,humane.log("Photo successfully uploaded!"),console.log(t),console.log(i),console.log(n),e.uploading=!1}).error(function(t,i,n){e.photos=e.photos.slice(e.photos.length-1,1),humane.log("Upload failed. "+t),console.log(t),console.log(i),console.log(n),e.uploading=!1})}},e.showCropBox=function(e){var t=new Image;t.src=e.target.result,t.onload=function(){function e(e){i.width=i.height=100;var t=i.getContext("2d");t.drawImage(o,e.x,e.y,e.w,e.h,0,0,i.width,i.height),$("#image_output").attr("src",i.toDataURL()),$("#image_source").text(i.toDataURL())}var i=document.createElement("canvas");i.width=300,i.height=t.height*(300/t.width);var n=i.getContext("2d");n.drawImage(t,0,0,i.width,i.height),$("#image_input").html(['<img src="',i.toDataURL(),'"/>'].join(""));var o=$("#image_input img")[0],i=document.createElement("canvas");$("#image_input img").Jcrop({bgColor:"black",bgOpacity:.6,setSelect:[0,0,100,100],aspectRatio:1,keySupport:!1,onChange:e})}},e.deletePhoto=function(i){var n=e.photos[i],o=n.set_id;n.deleted=!0;var r=baseURL+"/photo/"+e.item.id,s={set_id:o,_token:csrfToken,_method:"DELETE"};humane.log("Deleting..."),t.put(r,JSON.stringify(s)).success(function(t){e.responseData=t,console.log("The response data is: "),console.log(e.responseData),humane.log("Photo deleted successfully"),e.item.public&&t.message&&humane.log(t.message),t.item&&(e.item.public=t.item.public),e.photos.splice(i,1)}).error(function(e){console.log(e),humane.log("Photo deletion failed."),n.deleted=!1})}}]),app.controller("indexController",["$scope","$http",function(e,t){e.currency="USD",e.codes=currencyCodes,e.handleCodeChange=function(t){e.currency=e.codes[t],console.log(e.currency)},e.toggleAdd=function(){e.shouldShowAdd=!e.shouldShowAdd,$("#addItem").slideToggle(300)},e.formSubmit=function(){e.posting=!0,e.formData={_token:csrfToken,title:e.title,currency:e.currency,price:e.price},console.log(e.formData),t.post("/products",JSON.stringify(e.formData)).success(function(t){e.responseData=t,t.message&&(e.posting=!1,humane.log(t.message)),t.redirect_url&&(window.location=e.responseData.redirect_url),e.posting=!1}).error(function(){e.posting=!1})}}]),app.controller("showController",["$scope",function(e){e.item=item,e.user=e.item.user,e.profile_img_url=e.user.profile_img.url}]),app.controller("notificationsController",["$scope",function(e){e.notifications=sailr.notifications,e.baseURL=baseURL}]),app.controller("searchController",["$scope","$http",function(e){e.results=sailr.results,e.baseURL=baseURL}]),app.controller("chooseController",["$scope","$http","$q","StripeFactory","HelperFactory","SubscriptionFactory",function(e,t,i,n,o,r){e.showingCreditForm=!1,e.showCardForm=!1,e.posting=!1,e.showCoupon=!1,e.couponCode="",e.card={},e.toggleCouponShow=function(){e.showCoupon=!e.showCoupon},e.subscribeToPlan=function(t){console.log("PLAN ID::: "+t),e.posting=!0;var i=o.createStripeCardObjectFromFormattedInput(e.card),s=n.createToken(i);s.then(function(i){if(console.log(i),console.log(n.getToken()),e.couponCode)var o=r.createSubscription(t,n.getToken().id,e.couponCode);else var o=r.createSubscription(t,n.getToken().id);o.then(function(t){e.posting=!1,e.showCardForm=!1,console.log("SUCCESS on server subscription create"),console.log(t),humane.log(t.message),window.location=t.redirect_url},function(t){e.posting=!1,e.$apply(function(){e.posting=!1}),console.log("Subscription fail::   --"),console.log(t),humane.log(t.data.message)})},function(t){e.posting=!1,console.log("Stripe card fail::::"),console.log(t),humane.log(n.getErrors().message)})},e.handleSubscribeButtonPressed=function(){e.showingCreditForm||(e.showCardForm=!0,e.showingCreditForm=!0)}}]),app.controller("manageController",["$scope","$http","$q","SubscriptionFactory","$rootScope",function(e,t,i,n){e.posting=!1,e.subscription=subscription,e.user=user,e.cancelSubscription=function(){e.posting=!0;var t=n.cancelSubscription();t.then(function(t){e.posting=!1,e.subscription.cancel_at_period_end=!0,humane.log(t.message)},function(t){e.posting=!1,e.$apply(),humane.log(t.message)})}}]);var openFileBrowser=function(){document.getElementById("addFiles").click()};app.controller("updateController",["$scope",function(e){e.showSubmit=!1,$("#addFiles").on("change",function(){e.$apply(function(){e.showSubmit=!0})}),e.user={},e.fileButtonText="Select new profile photo",e.user=loggedInUser,e.profileURL=profileImageURL}]);